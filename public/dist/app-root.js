(function(c){var d={};function j(g){if(d[g])return d[g].exports;var l=d[g]={i:g,l:!1,exports:{}};return c[g].call(l.exports,l,l.exports,j),l.l=!0,l.exports}return j.m=c,j.c=d,j.d=function(g,l,n){j.o(g,l)||Object.defineProperty(g,l,{enumerable:!0,get:n})},j.r=function(g){typeof Symbol!=="undefined"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},j.t=function(g,l){l&1&&(g=j(g));if(l&8)return g;if(l&4&&typeof g==="object"&&g&&g.__esModule)return g;var n=Object.create(null);j.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:g});if(l&2&&typeof g!="string")for(var r in g)j.d(n,r,function(i){return g[i]}.bind(null,r));return n},j.n=function(g){var l=g&&g.__esModule?function n(){return g.default}:function n(){return g};return j.d(l,"a",l),l},j.o=function(g,l){return Object.prototype.hasOwnProperty.call(g,l)},j.p="",j(j.s=0)})([function(c,d,j){j.r(d);var g=j(1),l=j(12),n=j(13),r=j(14),i=j(15),h=j(16),f=j(7),e=j(9);j.d(d,"createLiveFragment",function(){return e.createLiveFragment}),j.d(d,"createIndexedFragment",function(){return e.createIndexedFragment}),j.d(d,"createKeyedFragment",function(){return e.createKeyedFragment})},function(c,d,j){j.r(d);var g=j(2),l=j(3),n=j(4),r=j(5),i=j(7),h=j(9),f=j(10),e=j(11);function s(m,q){var v=Object.getOwnPropertyDescriptors(q);return Object.defineProperties(m.prototype,v),m}var a=typeof window!=="undefined"?window:typeof globalThis!=="undefined"?globalThis:null,b={version:"2.0.0",global:a,ctx:null,document:a.document};a.imba=b,a.customElements||(a.customElements={define:function(){return!0},get:function(){return!0}}),b.setTimeout=function(m,q){return setTimeout(function(){return m(),b.$commit()},q)},b.setInterval=function(m,q){return setInterval(function(){return m(),b.$commit()},q)},b.clearInterval=a.clearInterval,b.clearTimeout=a.clearTimeout,Object.defineProperty(b,"flags",{get:function(){return b.document.documentElement.classList}}),b.q$=function(m,q){return(q instanceof Element?q:document).querySelector(m)},b.q$$=function(m,q){return(q instanceof Element?q:document).querySelectorAll(m)};const p={cm:1,mm:1,Q:1,pc:1,pt:1,px:1,em:1,ex:1,ch:1,rem:1,vw:1,vh:1,vmin:1,vmax:1,s:1,ms:1,fr:1,"%":1,in:1,turn:1,grad:1,rad:1,deg:1,Hz:1,kHz:1},t={prefix:1,suffix:1,content:1},k=/^([xyz])$/,u=/^([tlbr]|size|[whtlbr]|[mps][tlbrxy]?|[rcxy]?[gs])$/;b.toStyleValue=function(m,q,v){t[v]&&(m=String(m));let w=typeof m;if(w=="number"){q||(k.test(v)?q="px":u.test(v)?q="u":v=="rotate"&&(q="turn"));if(q)return p[q]?m+q:q=="u"?m*4+"px":"calc(var(--u_"+q+",1px) * "+m+")"}else w=="string"&&v&&(t[v]&&m[0]!='"'&&m[0]!="'"&&(m.indexOf('"')>=0?m.indexOf("'")==-1&&(m="'"+m+"'"):m='"'+m+'"'));return m},b.inlineStyles=function(m,q){g.register(m,q);return};var x=/-./g;b.toCamelCase=function(m){return m.indexOf("-")>=0?m.replace(x,function(q){return q.charAt(1).toUpperCase()}):m};var o=function(m,q,v){let w,y,A;for(;(w=v)&&(v=v.next);)(y=v.listener)&&(v.path&&y[v.path]?A=q?y[v.path].apply(y,q):y[v.path]():A=q?y.apply(v,q):y.call(v)),v.times&&--v.times<=0&&(w.next=v.next,v.listener=null);return};b.listen=function(m,q,v,w){let y,A,D;return y=m.__listeners__||(m.__listeners__={}),A=y[q]||(y[q]={}),D=A.tail||(A.tail=A.next={}),D.listener=v,D.path=w,A.tail=D.next={},D},b.once=function(m,q,v){let w=b.listen(m,q,v);return w.times=1,w},b.unlisten=function(m,q,v,w){let y,A,D=m.__listeners__;if(!D)return;if(y=D[q]){for(;(A=y)&&(y=y.next);)if(y==v||y.listener==v){A.next=y.next,y.listener=null;break}}return},b.emit=function(m,q,v){var w;(w=m.__listeners__)&&(w[q]&&o(q,v,w[q]),w.all&&o(q,[q,v],w.all));return},b.scheduler=new n.Scheduler(),b.$commit=function(){return b.scheduler.add("render")},b.commit=function(){return b.scheduler.add("render"),b.scheduler.promise},b.tick=function(){return b.commit(),b.scheduler.promise},b.mount=function(m,q){let v=q||document.body,w=m;if(m instanceof Function){let y={_:v},A=function(){return b.ctx=y,m(y)};w=A(),b.scheduler.listen("render",A)}else w.__F|=64;return v.appendChild(w)};var z={get(m,q){let v=m,w;for(;v&&w==void 0;)(v=v.$parent)&&(w=v[q]);return w}};s(Node,{get $context(){return this.$context_||(this.$context_=new Proxy(this,z))},get $parent(){return this.up$||this.parentNode},init$(){return this},replaceWith$(m){return!(m instanceof Node)&&m.replace$?m.replace$(this):this.parentNode.replaceChild(m,this),m},insertInto$(m){return m.appendChild$(this),this},insertBefore$(m,q){return this.insertBefore(m,q)},insertBeforeBegin$(m){return this.parentNode.insertBefore(m,this)},insertAfterEnd$(m){return this.nextSibling?this.nextSibling.insertBeforeBegin$(m):this.parentNode.appendChild(m)},insertAfterBegin$(m){return this.childNodes[0]?this.childNodes[0].insertBeforeBegin$(m):this.appendChild(m)}}),s(Comment,{replaceWith$(m){return m&&m.joinBefore$?m.joinBefore$(this):this.parentNode.insertBefore$(m,this),this.parentNode.removeChild(this),m}}),s(Element,{log(...m){return console.log(...m),this},emit(m,q,v={bubbles:!0}){q!=void 0&&(v.detail=q);let w=new CustomEvent(m,v),y=this.dispatchEvent(w);return w},slot$(m,q){return this},on$(m,q,v){let w="on$"+m,y;this[w]instanceof Function&&(y=this[w](q,v)),y=new r.EventHandler(q,v);let A=q.capture,D=q.passive,F=A;return D&&(F={passive:D,capture:A}),/^(pointerdrag|touch)$/.test(m)&&(y.type=m,m="pointerdown"),this.addEventListener(m,y,F),y},text$(m){return this.textContent=m,this},insert$(m,q,v){let w=typeof m;if(w==="undefined"||m===null){if(v&&v instanceof Comment)return v;let y=document.createComment("");return v?v.replaceWith$(y):y.insertInto$(this),y}if(m===v)return m;if(w!=="object"){let y,A=m;if(q&128&&q&256){this.textContent=A;return}return v?v instanceof Text?(v.textContent=A,v):(y=document.createTextNode(A),v.replaceWith$(y,this),y):(this.appendChild$(y=document.createTextNode(A)),y)}else return v?v.replaceWith$(m,this):m.insertInto$(this),m},get flags(){return this.$flags||(this.$flags=new l.Flags(this),this.flag$==Element.prototype.flag$&&(this.flags$ext=this.className),this.flagDeopt$()),this.$flags},flag$(m){let q=this.flags$ns;this.className=q?q+(this.flags$ext=m):this.flags$ext=m;return},flagDeopt$(){var m=this;this.flag$=this.flagExt$,this.flagSelf$=function(q){return m.flagSync$(m.flags$own=q)};return},flagExt$(m){return this.flagSync$(this.flags$ext=m)},flagSelf$(m){return this.flagDeopt$(),this.flagSelf$(m)},flagSync$(){return this.className=(this.flags$ns||"")+(this.flags$ext||"")+" "+(this.flags$own||"")+" "+(this.$flags||"")},open$(){return this},close$(){return this},end$(){this.render&&this.render();return},css$(m,q,v){return this.style[m]=q},css$var(m,q,v,w){let y=b.toStyleValue(q,v,w);this.style.setProperty(m,y);return}}),Element.prototype.appendChild$=Element.prototype.appendChild,Element.prototype.removeChild$=Element.prototype.removeChild,Element.prototype.insertBefore$=Element.prototype.insertBefore,Element.prototype.replaceChild$=Element.prototype.replaceChild,Element.prototype.set$=Element.prototype.setAttribute,Element.prototype.setns$=Element.prototype.setAttributeNS,ShadowRoot.prototype.insert$=Element.prototype.insert$,ShadowRoot.prototype.appendChild$=Element.prototype.appendChild$,b.createLiveFragment=h.createLiveFragment,b.createIndexedFragment=h.createIndexedFragment,b.createKeyedFragment=h.createKeyedFragment;const C={};class B{constructor(){this.types={}}lookup(m){return this.types[m]}get(m,q){return!m||m=="component"?f.ImbaElement:this.types[m]?this.types[m]:q&&a[q]?a[q]:a.customElements.get(m)||f.ImbaElement}create(m){return this.types[m]?this.types[m].create$():document.createElement(m)}define(m,q,v={}){this.types[m]=q,q.nodeName=m;let w=q.prototype,y=w._ns_;if(v.ns){let A=v.ns,D=A+" "+A+"_ ";y&&(D+=w.flags$ns,A+=" "+y),w._ns_=A,w.flags$ns=D}return v.extends?C[m]=q:a.customElements.define(m,q),q}}b.tags=new B(),b.createElement=function(m,q,v,w,y){var A=document.createElement(m);return v&&(A.className=v),w!==null&&A.text$(w),q&&q instanceof Node&&A.insertInto$(q),A},b.createComponent=function(m,q,v,w,y){var A;return typeof m!="string"&&(m&&m.nodeName&&(m=m.nodeName)),C[m]?(A=C[m].create$(A),A.slot$=f.ImbaElement.prototype.slot$,A.__slots={}):A=document.createElement(m),A.up$=q,A.init$(),w!==null&&A.slot$("__").text$(w),(v||A.flags$ns)&&A.flag$(v||""),A},b.createSVGElement=function(m,q,v,w,y){var A=document.createElementNS("http://www.w3.org/2000/svg",m);return v&&(A.className.baseVal=v),q&&q instanceof Node&&A.insertInto$(q),A}},function(c,d,j){j.r(d),j.d(d,"setup",function(){return n}),j.d(d,"register",function(){return r}),j.d(d,"parseDimension",function(){return i});let g,l="*,::before,::after {	box-sizing: border-box;	border-width: 0;	border-style: solid;	border-color: currentColor;}";function n(){if(!g){if(g=document.documentElement)return r(l)}}function r(h,f){n();var e=document.createElement("style");e.textContent=h,document.head.appendChild(e);return}function i(h){if(typeof h=="string"){let[f,e,s]=h.match(/^([-+]?[\d\.]+)(%|\w+)$/);return[parseFloat(e),s]}else if(typeof h=="number")return[h]}},function(c,d,j){j.r(d),j.d(d,"Flags",function(){return g});class g{constructor(l){this.dom=l,this.string=""}contains(l){return this.dom.classList.contains(l)}add(l){return this.contains(l)?this:(this.string+=(this.string?" ":"")+l,this.dom.classList.add(l),this)}remove(l){if(!this.contains(l))return this;var n=new RegExp("(^|\\s)*"+l+"(\\s|$)*","g");return this.string=this.string.replace(n,""),this.dom.classList.remove(l),this}toggle(l,n){return n===void 0&&(n=!this.contains(l)),n?this.add(l):this.remove(l)}incr(l){let n=this.stacks||(this.stacks={}),r=n[l]||0;return r<1&&this.add(l),n[l]=Math.max(r,0)+1,this}decr(l){let n=this.stacks||(this.stacks={}),r=n[l]||0;return r==1&&this.remove(l),n[l]=Math.max(r,1)-1,this}valueOf(){return this.string}toString(){return this.string}sync(){return this.dom.flagSync$()}}},function(c,d,j){j.r(d),j.d(d,"Scheduler",function(){return n});function g(r){return r?r.toIterable?r.toIterable():r:[]}var l=typeof requestAnimationFrame!=="undefined"?requestAnimationFrame:function(r){return setTimeout(r,1e3/60)};class n{constructor(){var r=this;this.queue=[],this.stage=-1,this.batch=0,this.scheduled=!1,this.listeners={},this.$promise=null,this.$resolve=null,this.$ticker=function(i){return r.scheduled=!1,r.tick(i)}}add(r,i){(i||this.queue.indexOf(r)==-1)&&this.queue.push(r);if(!this.scheduled)return this.schedule()}listen(r,i){var h;return(h=this.listeners)[r]||(h[r]=new Set()),this.listeners[r].add(i)}unlisten(r,i){return this.listeners[r]&&this.listeners[r].delete(i)}get promise(){var r=this;return this.$promise||(this.$promise=new Promise(function(i){return r.$resolve=i}))}tick(r){var i=this,h=this.queue;this.ts||(this.ts=r),this.dt=r-this.ts,this.ts=r,this.queue=[],this.stage=1,this.batch++;if(h.length)for(let f=0,e=g(h),s=e.length;f<s;f++){let a=e[f];typeof a==="string"&&this.listeners[a]?this.listeners[a].forEach(function(b){if(b.tick instanceof Function)return b.tick(i);if(b instanceof Function)return b(i)}):a instanceof Function?a(this.dt,this):a.tick&&a.tick(this.dt,this)}return this.stage=2,this.stage=this.scheduled?0:-1,this.$promise&&(this.$resolve(this),this.$promise=this.$resolve=null),this}schedule(){return this.scheduled||(this.scheduled=!0,this.stage==-1&&(this.stage=0),l(this.$ticker)),this}}},function(c,d,j){j.r(d),j.d(d,"EventHandler",function(){return r});var g=j(6);function l(i){return i?i.toIterable?i.toIterable():i:[]}const n={esc:[27],tab:[9],enter:[13],space:[32],up:[38],down:[40],left:[37],right:[39],del:[8,46]};g.Event.log$mod=function(...i){return console.log(...i),!0},g.Event.sel$mod=function(i){return!!this.event.target.matches(String(i))},g.Event.if$mod=function(i){return!!i},g.Event.wait$mod=function(i=250){return new Promise(function(h){return setTimeout(h,i)})},g.Event.self$mod=function(){return this.event.target==this.element},g.Event.throttle$mod=function(i=250){var h=this;return this.handler.throttled?!1:(this.handler.throttled=!0,this.element.flags.incr("throttled"),imba.once(this.current,"end",function(){return setTimeout(function(){return h.element.flags.decr("throttled"),h.handler.throttled=!1},i)}),!0)},g.Event.flag$mod=function(i,h){let f=h instanceof globalThis.Element?h:h?this.element.closest(h):this.element;if(!f)return!0;let e=this.step;this.state[e]=this.id,f.flags.incr(i);let s=Date.now();return imba.once(this.current,"end",function(){let a=Date.now()-s,b=Math.max(250-a,0);return setTimeout(function(){return f.flags.decr(i)},b)}),!0},g.Event.busy$mod=function(i){return g.Event.flag$mod.call(this,"busy",250,i)};class r{constructor(i,h){this.params=i,this.closure=h}getHandlerForMethod(i,h){return i?i[h]?i:this.getHandlerForMethod(i.parentNode,h):null}emit(i,...h){return imba.emit(this,i,h)}on(i,...h){return imba.listen(this,i,...h)}once(i,...h){return imba.once(this,i,...h)}un(i,...h){return imba.unlisten(this,i,...h)}async handleEvent(i){var h=i.target,f=i.currentTarget,e=this.params;let s=!0;this.count||(this.count=0),this.state||(this.state={});let a={element:f,event:i,modifiers:e,handler:this,id:++this.count,step:-1,state:this.state,current:null};a.current=a;if(i.handle$mod){if(i.handle$mod.apply(a,e.options||[])==!1)return}let b=g.Event[this.type+"$handle"]||g.Event[i.type+"$handle"]||i.handle$mod;if(b&&b.apply(a,e.options||[])==!1)return;this.currentEvents||(this.currentEvents=new Set()),this.currentEvents.add(i);for(let p=0,t=Object.keys(e),k=t.length,u,x;p<k;p++){u=t[p],x=e[u],a.step++;if(u[0]=="_")continue;u.indexOf("~")>0&&(u=u.split("~")[0]);let o=null,z=[i,a],C,B=null,m;if(u[0]=="$"&&u[1]=="_"&&x[0]instanceof Function)u=x[0],z=[i,a].concat(x.slice(1)),B=f;else if(x instanceof Array){z=x.slice(),o=z;for(let q=0,v=l(z),w=v.length;q<w;q++){let y=v[q];if(typeof y=="string"&&y[0]=="~"&&y[1]=="$"){let A=y.slice(2),D=A.split("."),F=a[D.shift()]||i;for(let G=0,L=l(D),V=L.length;G<V;G++){let M=L[G];F=F?F[M]:void 0}z[q]=F}}}typeof u=="string"&&(m=u.match(/^(emit|flag|moved|pin|fit|refit|map|remap)-(.+)$/))&&(o||(o=z=[]),z.unshift(m[2]),u=m[1]);if(u=="stop")i.stopImmediatePropagation();else if(u=="prevent")i.preventDefault();else if(u=="commit")s=!0;else if(u=="silence"||u=="silent")s=!1;else if(u=="ctrl"){if(!i.ctrlKey)break}else if(u=="alt"){if(!i.altKey)break}else if(u=="shift"){if(!i.shiftKey)break}else if(u=="meta"){if(!i.metaKey)break}else if(u=="once")f.removeEventListener(i.type,this);else{if(u=="options")continue;if(n[u]){if(n[u].indexOf(i.keyCode)<0)break}else if(u=="emit"){let q=z[0],v=z[1],w=new CustomEvent(q,{bubbles:!0,detail:v});w.originalEvent=i;let y=f.dispatchEvent(w)}else if(typeof u=="string"){let q=this.type&&g.Event[this.type+"$"+u+"$mod"];q||(q=i[u+"$mod"]||g.Event[i.type+"$"+u]||g.Event[u+"$mod"]),q instanceof Function?(u=q,B=a,z=o||[]):u[0]=="_"?(u=u.slice(1),B=this.closure):B=this.getHandlerForMethod(f,u)}}u instanceof Function?C=u.apply(B||f,z):B&&(C=B[u].apply(B,z)),C&&C.then instanceof Function&&C!=imba.scheduler.$promise&&(s&&imba.$commit(),C=await C);if(C===!1)break;a.value=C}imba.emit(a,"end",a),s&&imba.$commit(),this.currentEvents.delete(i),this.currentEvents.size==0&&this.emit("idle");return}}},function(c,d,j){j.r(d),j.d(d,"Document",function(){return g}),j.d(d,"Node",function(){return l}),j.d(d,"Text",function(){return n}),j.d(d,"Comment",function(){return r}),j.d(d,"Element",function(){return i}),j.d(d,"SVGElement",function(){return h}),j.d(d,"HTMLElement",function(){return f}),j.d(d,"DocumentFragment",function(){return e}),j.d(d,"ShadowRoot",function(){return s}),j.d(d,"Event",function(){return a}),j.d(d,"CustomEvent",function(){return b}),j.d(d,"MouseEvent",function(){return p}),j.d(d,"KeyboardEvent",function(){return t}),j.d(d,"PointerEvent",function(){return k}),j.d(d,"document",function(){return u});const{Document:g,Node:l,Text:n,Comment:r,Element:i,SVGElement:h,HTMLElement:f,DocumentFragment:e,ShadowRoot:s,Event:a,CustomEvent:b,MouseEvent:p,KeyboardEvent:t,PointerEvent:k,document:u}=window},function(c,d,j){j.r(d);var g=j(6),l=j(8);function n(i,h){var f=Object.getOwnPropertyDescriptors(h);return Object.defineProperties(i.prototype,f),i}n(g.PointerEvent,{primary$mod(){return!!this.event.isPrimary},mouse$mod(){return this.event.pointerType=="mouse"},pen$mod(){return this.event.pointerType=="pen"},touch$mod(){return this.event.pointerType=="touch"},pressure$mod(i=0){return this.event.pressure>i},lock$mod(i){return!0}});class r{constructor(i,h,f){this.phase="init",this.events=[],this.event=i,this.handler=h,this.target=this.currentTarget=f}set event(i){this.x=i.clientX,this.y=i.clientY,this.events.push(i)}get start(){return this.events[0]}get event(){return this.events[this.events.length-1]}get elapsed(){return this.event.timeStamp-this.events[0].timeStamp}get pointerId(){return this.event.pointerId}get clientX(){return this.event.clientX}get clientY(){return this.event.clientY}get offsetX(){return this.event.offsetX}get offsetY(){return this.event.offsetY}get type(){return this.event.type}emit(i,...h){return imba.emit(this,i,h)}on(i,...h){return imba.listen(this,i,...h)}once(i,...h){return imba.once(this,i,...h)}un(i,...h){return imba.unlisten(this,i,...h)}}g.Event.touch$in$mod=function(){return g.Event.touch$reframe$mod.apply(this,arguments)},g.Event.touch$fit$mod=function(){var i,h;let f=(i=this.state)[h=this.step]||(i[h]={clamp:!0});return g.Event.touch$reframe$mod.apply(this,arguments)},g.Event.touch$snap$mod=function(i=1,h=i){return this.event.x=Object(l.round)(this.event.x,i),this.event.y=Object(l.round)(this.event.y,h),!0},g.Event.touch$moved$mod=function(i,h){var f=this,e,s;let a=(e=this.state)[s=this.step]||(e[s]={});if(!a.setup){let u=i||4;typeof i=="string"&&i.match(/^(up|down|left|right|x|y)$/)&&(a.dir=i,u=h||4),a.setup=!0;let[x,o]=Object(l.parseDimension)(u);a.threshold=x,a.sy=x,a.x0=this.event.x,a.y0=this.event.y,o&&o!="px"&&console.warn("only px threshold allowed in @touch.moved")}if(a.active)return!0;let b=a.threshold,p=this.event.x-a.x0,t=this.event.y-a.y0,k=!1;p>b&&(a.dir=="right"||a.dir=="x")&&(k=!0),!k&&p<-b&&(a.dir=="left"||a.dir=="x")&&(k=!0),!k&&t>b&&(a.dir=="down"||a.dir=="y")&&(k=!0),!k&&t<-b&&(a.dir=="up"||a.dir=="y")&&(k=!0);if(!k){let u=Math.sqrt(p*p+t*t);u>b&&!a.dir&&(k=!0)}if(k){a.active=!0;let u=this.state.pinTarget;this.element.flags.incr("_move_"),u&&u.flags.incr("_move_"),imba.once(this.current,"end",function(){return u&&u.flags.decr("_move_"),f.element.flags.decr("_move_")})}return!!a.active},g.Event.touch$reframe$mod=function(...i){var h,f;let e=(h=this.state)[f=this.step]||(h[f]={});if(e.rect){let s=this.event.x=e.x(this.event.x,e.clamp),a=this.event.y=e.y(this.event.y,e.clamp);this.event.dx=s-this.event.x0,this.event.dy=a-this.event.y0}else{let s=this.element,a=i.length,b=i[0],p=0,t="100%",k=1,u=typeof b;u=="number"||u=="string"&&/^([-+]?\d[\d\.]*)(%|\w+)$/.test(b)||b instanceof Array?b=null:u=="string"&&(b=="this"||b==""?b=this.element:b=="up"?b=this.element.parentNode:b=="op"?b=this.element.offsetParent:b=s.closest(b)||s.querySelector(b)),b==null&&(a++,i.unshift(b=s)),a==2?k=i[1]:a>2&&([p,t,k=1]=i.slice(1));let x=b.getBoundingClientRect();p instanceof Array||(p=[p,p]),t instanceof Array||(t=[t,t]),k instanceof Array||(k=[k,k]),e.rect=x,e.x=Object(l.scale)(x.left,x.right,p[0],t[0],k[0]),e.y=Object(l.scale)(x.top,x.bottom,p[1],t[1],k[1]),this.state.scaleX=e.x,this.state.scaleY=e.y,this.event.x0=this.event.x=e.x(this.event.x,e.clamp),this.event.y0=this.event.y=e.y(this.event.y,e.clamp)}return!0},g.Event.touch$pin$mod=function(...i){let h=this.state[this.step];if(!h){let f=i[0];typeof f=="string"&&(f=this.element.closest(f)||this.element.querySelector(f)),f instanceof g.Element||i.unshift(f=this.state.target);let e=i[1]||0,s=i[2]==null?i[2]=e:i[2],a=f.getBoundingClientRect();h=this.state[this.step]={x:this.state.clientX-(a.left+a.width*e),y:this.state.clientY-(a.top+a.height*s)},f&&(this.state.pinTarget=f,f.flags.incr("_touch_"),this.state.once("end",function(){return f.flags.decr("_touch_")}))}return this.event.x-=h.x,this.event.y-=h.y,!0},g.Event.touch$lock$mod=function(...i){let h=this.state[this.step];if(!h){h=this.state[this.step]=this.state.target.style;let f=h.touchAction;h.touchAction="none",this.state.once("end",function(){return h.removeProperty("touch-action")})}return!0},g.Event.touch$sync$mod=function(i,h="x",f="y"){let e=this.state[this.step];return e||(e=this.state[this.step]={x:i[h]||0,y:i[f]||0,tx:this.state.x,ty:this.state.y}),h&&(i[h]=e.x+(this.state.x-e.tx)),f&&(i[f]=e.y+(this.state.y-e.ty)),!0},g.Event.touch$handle=function(){var i=this;let h=this.event,f=this.element,e=this.state.pointerId;this.current=this.state;if(e)return e==h.pointerId;let s=this.state=this.handler.state=this.current=new r(h,this.handler,f),a=function(t){return t.preventDefault(),!1},b=function(t){let k=t.type;s.event=t;try{i.handler.handleEvent(s)}catch(u){}if(k=="pointerup"||k=="pointercancel")return f.releasePointerCapture(t.pointerId)},p=function(t){return f.flags.decr("_touch_"),s.emit("end"),i.handler.state={},f.removeEventListener("pointermove",b),f.removeEventListener("pointerup",b),f.removeEventListener("pointercancel",b),document.removeEventListener("selectstart",a)};return f.flags.incr("_touch_"),f.setPointerCapture(h.pointerId),f.addEventListener("pointermove",b),f.addEventListener("pointerup",b),f.addEventListener("pointercancel",b),f.addEventListener("lostpointercapture",p,{once:!0}),document.addEventListener("selectstart",a,{capture:!0}),b(h),!1}},function(c,d,j){j.r(d),j.d(d,"round",function(){return g}),j.d(d,"clamp",function(){return l}),j.d(d,"parseDimension",function(){return n}),j.d(d,"scale",function(){return r});function g(i,h=1){let f=1/h;return Math.round(i*f)/f}function l(i,h,f){return h>f?Math.max(f,Math.min(h,i)):Math.min(f,Math.max(h,i))}function n(i){if(typeof i=="string"){let[h,f,e]=i.match(/^([-+]?[\d\.]+)(%|\w+)$/);return[parseFloat(f),e]}else if(typeof i=="number")return[i]}function r(i,h,f,e,s=.1){let[a,b]=n(f),[p,t]=n(e),[k,u]=n(s);return b=="%"&&(a=(h-i)*(a/100)),t=="%"&&(p=(h-i)*(p/100)),u=="%"&&(k=(p-a)*(k/100)),function(x,o){let z=(x-i)/(h-i),C=a+(p-a)*z;return s&&(C=g(C,k)),o&&(C=l(C,a,p)),C}}},function(c,d,j){j.r(d),j.d(d,"createLiveFragment",function(){return f}),j.d(d,"createIndexedFragment",function(){return e}),j.d(d,"createKeyedFragment",function(){return s});var g=j(6);function l(a){return a?a.toIterable?a.toIterable():a:[]}function n(a,b){var p=Object.getOwnPropertyDescriptors(b);return Object.defineProperties(a.prototype,p),a}n(g.DocumentFragment,{get $parent(){return this.up$||this.$$parent},setup$(a,b){return this.$start=imba.document.createComment("start"),this.$end=imba.document.createComment("end"),this.$end.replaceWith$=function(p){return this.parentNode.insertBefore(p,this),p},this.appendChild(this.$start),this.appendChild(this.$end)},text$(a){this.$text?this.$text.textContent=a:this.$text=this.insert$(a);return},insert$(a,b,p){return this.$$parent?this.$$parent.insert$(a,b,p||this.$end):g.Element.prototype.insert$.call(this,a,b,p||this.$end)},insertInto$(a,b){return this.$$parent||(this.$$parent=a,a.appendChild$(this)),this},replaceWith$(a,b){this.$start.insertBeforeBegin$(a);for(var p=this.$start;p;){let t=p.nextSibling;this.appendChild(p);if(p==this.$end)break;p=t}return a},appendChild$(a){return this.$end?this.$end.insertBeforeBegin$(a):this.appendChild(a),a},removeChild$(a){return a.parentNode&&a.parentNode.removeChild(a),this},isEmpty$(){let a=this.$start,b=this.$end;for(;a=a.nextSibling;){if(a==b)break;if(a instanceof g.Element||a instanceof g.Text)return!1}return!0}}),n(g.ShadowRoot,{get $parent(){return this.host}});class r{constructor(a,b){this.__F=a,this.$parent=b,!(a&128)&&this instanceof i&&(this.$start=g.document.createComment("start"),b&&b.appendChild$(this.$start)),a&256||(this.$end=g.document.createComment("end"),b&&b.appendChild$(this.$end)),this.setup()}appendChild$(a,b){this.$end&&this.$parent?this.$end.insertBeforeBegin$(a):this.$parent&&this.$parent.appendChild$(a);return}replaceWith$(a){this.detachNodes(),this.$end.insertBeforeBegin$(a),this.$parent.removeChild$(this.$end),this.$parent=null;return}joinBefore$(a){return this.insertInto$(a.parentNode,a)}insertInto$(a,b){return this.$parent||(this.$parent=a,b?b.insertBeforeBegin$(this.$end):a.appendChild$(this.$end),this.attachNodes()),this}replace$(a){return this.$parent||(this.$parent=a.parentNode),a.replaceWith$(this.$end),this.attachNodes(),this}setup(){return this}}class i extends r{setup(){return this.array=[],this.changes=new Map(),this.dirty=!1,this.$={}}push(a,b){if(!(this.__F&1)){this.array.push(a),this.appendChild$(a);return}let p=this.array[b];if(!(p===a)){this.dirty=!0;let t=this.array.indexOf(a),k=this.changes.get(a);t===-1?(this.array.splice(b,0,a),this.insertChild(a,b)):t===b+1?(p&&this.changes.set(p,-1),this.array.splice(b,1)):(t>=0&&this.array.splice(t,1),this.array.splice(b,0,a),this.insertChild(a,b)),k==-1&&this.changes.delete(a)}return}insertChild(a,b){if(b>0){let p=this.array[b-1];p.insertAfterEnd$(a)}else this.$start?this.$start.insertAfterEnd$(a):this.$parent.insertAfterBegin$(a);return}removeChild(a,b){a.parentNode==this.$parent&&this.$parent.removeChild(a);return}attachNodes(){for(let a=0,b=l(this.array),p=b.length;a<p;a++){let t=b[a];this.$end.insertBeforeBegin$(t)}return}detachNodes(){for(let a=0,b=l(this.array),p=b.length;a<p;a++){let t=b[a];this.$parent.removeChild(t)}return}end$(a){var b=this;if(!(this.__F&1)){this.__F|=1;return}this.dirty&&(this.changes.forEach(function(p,t){if(p==-1)return b.removeChild(t)}),this.changes.clear(),this.dirty=!1);if(this.array.length>a)for(;this.array.length>a;){let p=this.array.pop();this.removeChild(p)}return}}class h extends r{setup(){return this.$=[],this.length=0}end$(a){let b=this.length;if(b==a||!this.$parent)return;let p=this.$,t=this.$parent;if(b>a)for(;b>a;)t.removeChild$(p[--b]);else if(a>b)for(;a>b;)this.appendChild$(p[b++]);this.length=a;return}attachNodes(){for(let a=0,b=l(this.$),p=b.length;a<p;a++){let t=b[a];if(a==this.length)break;this.$end.insertBeforeBegin$(t)}return}detachNodes(){let a=0;for(;a<this.length;){let b=this.$[a++];this.$parent.removeChild$(b)}return}}function f(a,b,p){var t=g.document.createDocumentFragment();return t.setup$(a,b),p&&(t.up$=p),t}function e(a,b){return new h(a,b)}function s(a,b){return new i(a,b)}},function(c,d,j){j.r(d),j.d(d,"ImbaElement",function(){return l});var g=j(6);class l extends g.HTMLElement{constructor(){super();this.flags$ns&&(this.flag$=this.flagExt$),this.setup$(),this.build()}setup$(){return this.__slots={},this.__F=0}init$(){return this.__F|=1|2,this}flag$(n){this.className=this.flags$ext=n;return}slot$(n,r){var i;return n=="__"&&!this.render?this:(i=this.__slots)[n]||(i[n]=imba.createLiveFragment(0,null,this))}build(){return this}awaken(){return this}mount(){return this}unmount(){return this}rendered(){return this}dehydrate(){return this}hydrate(){return this.autoschedule=!0,this}tick(){return this.commit()}visit(){return this.commit()}commit(){return this.isRender?(this.__F|=256,this.render&&this.render(),this.rendered(),this.__F=(this.__F|512)&~256):this}get autoschedule(){return(this.__F&64)!=0}set autoschedule(n){n?this.__F|=64:this.__F&=~64}isRender(){return!0}isMounting(){return(this.__F&16)!=0}isMounted(){return(this.__F&32)!=0}isAwakened(){return(this.__F&8)!=0}isRendered(){return(this.__F&512)!=0}isRendering(){return(this.__F&256)!=0}isScheduled(){return(this.__F&128)!=0}isHydrated(){return(this.__F&2)!=0}schedule(){return imba.scheduler.listen("render",this),this.__F|=128,this}unschedule(){return imba.scheduler.unlisten("render",this),this.__F&=~128,this}end$(){return this.visit()}connectedCallback(){let n=this.__F,r=n&1,i=n&8;if(n&(16|32))return;this.__F|=16,r||this.init$(),n&2||(this.flags$ext=this.className,this.hydrate(),this.__F|=2,this.commit()),i||(this.awaken(),this.__F|=8);let h=this.mount();return h&&h.then instanceof Function&&h.then(imba.commit),n=this.__F=(this.__F|32)&~16,n&64&&this.schedule(),this}disconnectedCallback(){return this.__F=this.__F&(~32&~16),this.__F&128&&this.unschedule(),this.unmount()}}},function(c,d,j){j.r(d);var g=j(6);function l(n,r){var i=Object.getOwnPropertyDescriptors(r);return Object.defineProperties(n.prototype,i),n}l(g.SVGElement,{flag$(n){let r=this.flags$ns;this.className.baseVal=r?r+(this.flags$ext=n):this.flags$ext=n;return},flagSelf$(n){var r=this;return this.flag$=function(i){return r.flagSync$(r.flags$ext=i)},this.flagSelf$=function(i){return r.flagSync$(r.flags$own=i)},this.flagSelf$(n)},flagSync$(){return this.className.baseVal=(this.flags$ns||"")+(this.flags$ext||"")+" "+(this.flags$own||"")+" "+(this.$flags||"")}})},function(c,d){function j(e){return e?e.toIterable?e.toIterable():e:[]}function g(e,s){var a=Object.getOwnPropertyDescriptors(s);return Object.defineProperties(e.prototype,a),e}const l={INPUT:!0,SELECT:!0,TEXTAREA:!0,BUTTON:!0};var n=function(e){return e instanceof Array||e&&e.has instanceof Function},r=function(e,s){return e instanceof Array?e.indexOf(s)>=0:e&&e.has instanceof Function?e.has(s):e&&e.contains instanceof Function?e.contains(s):e==s?!0:!1},i=function(e,s){if(e instanceof Array)return e.push(s);if(e&&e.add instanceof Function)return e.add(s)},h=function(e,s){if(e instanceof Array){let a=e.indexOf(s);if(a>=0)return e.splice(a,1)}else if(e&&e.delete instanceof Function)return e.delete(s)};function f(e){function s(){return e[0]?e[0][e[1]]:void 0}function a(b){return e[0]?e[0][e[1]]=b:null}return{get:s,set:a}}g(Element,{getRichValue(){return this.value},setRichValue(e){return this.value=e},bind$(e,s){let a=s||[];return e=="data"&&!this.$$bound&&l[this.nodeName]&&(this.$$bound=!0,this.change$&&this.addEventListener("change",this.change$=this.change$.bind(this)),this.input$&&this.addEventListener("input",this.input$=this.input$.bind(this),{capture:!0}),this.click$&&this.addEventListener("click",this.click$=this.click$.bind(this),{capture:!0})),Object.defineProperty(this,e,a instanceof Array?f(a):a),a}}),Object.defineProperty(Element.prototype,"richValue",{get(){return this.getRichValue()},set(e){return this.setRichValue(e)}}),g(HTMLSelectElement,{change$(e){let s=this.data,a=this.$$value;this.$$value=void 0;let b=this.getRichValue();if(this.multiple){if(a)for(let p=0,t=j(a),k=t.length;p<k;p++){let u=t[p];if(b.indexOf(u)!=-1)continue;h(s,u)}for(let p=0,t=j(b),k=t.length;p<k;p++){let u=t[p];(!a||a.indexOf(u)==-1)&&i(s,u)}}else this.data=b[0];return imba.commit(),this},getRichValue(){var e;if(this.$$value)return this.$$value;e=[];for(let s=0,a=j(this.selectedOptions),b=a.length;s<b;s++){let p=a[s];e.push(p.richValue)}return this.$$value=e},syncValue(){let e=this.data;if(this.multiple){let s=[];for(let a=0,b=j(this.options),p=b.length;a<p;a++){let t=b[a],k=t.richValue,u=r(e,k);t.selected=u,u&&s.push(k)}this.$$value=s}else for(let s=0,a=j(this.options),b=a.length;s<b;s++){let p=a[s],t=p.richValue;if(t==e){this.$$value=[t],this.selectedIndex=s;break}}return},end$(){return this.syncValue()}}),g(HTMLOptionElement,{setRichValue(e){return this.$$value=e,this.value=e},getRichValue(){return this.$$value!==void 0?this.$$value:this.value}}),g(HTMLTextAreaElement,{setRichValue(e){return this.$$value=e,this.value=e},getRichValue(){return this.$$value!==void 0?this.$$value:this.value},input$(e){return this.data=this.value,imba.commit()},end$(){if(this.$$bound&&this.value!=this.data)return this.value=this.data}}),g(HTMLInputElement,{input$(e){let s=this.type;return s=="checkbox"||s=="radio"?void 0:(this.$$value=void 0,this.data=this.richValue,imba.commit())},change$(e){let s=this.data,a=this.richValue;if(this.type=="checkbox"||this.type=="radio"){let b=this.checked;n(s)?b?i(s,a):h(s,a):this.data=b?a:!1}return imba.commit()},setRichValue(e){this.$$value!==e&&(this.$$value=e,this.value!==e&&(this.value=e));return},getRichValue(){if(this.$$value!==void 0)return this.$$value;let e=this.value,s=this.type;return s=="range"||s=="number"?(e=this.valueAsNumber,Number.isNaN(e)&&(e=null)):s=="checkbox"&&((e==void 0||e==="on")&&(e=!0)),e},end$(){if(this.$$bound){let e=this.type;if(e=="checkbox"||e=="radio"){let s=this.data;s===!0||s===!1||s==null?this.checked=!!s:this.checked=r(s,this.richValue)}else this.richValue=this.data}return}}),g(HTMLButtonElement,{get checked(){return this.$checked},set checked(e){e!=this.$checked&&(this.$checked=e,this.flags.toggle("checked",!!e))},setRichValue(e){return this.$$value=e,this.value=e},getRichValue(){return this.$$value!==void 0?this.$$value:this.value},click$(e){let s=this.data,a=this.checked,b=this.richValue;return n(s)?a?h(s,b):i(s,b):this.data=a?null:b,imba.commit()},end$(){if(this.$$bound){let e=this.data;e===!0||e===!1||e==null?this.checked=!!e:this.checked=r(e,this.richValue)}return}})},function(c,d,j){j.r(d);var g=j(6);function l(n,r){var i=Object.getOwnPropertyDescriptors(r);return Object.defineProperties(n.prototype,i),n}l(g.SVGElement,{flag$(n){this.className.baseVal=this.flags$ext=n;return},flagSelf$(n){var r=this;return this.flag$=function(i){return r.flagSync$(r.flags$ext=i)},this.flagSelf$=function(i){return r.flagSync$(r.flags$own=i)},this.flagSelf$(n)},flagSync$(){return this.className.baseVal=(this.flags$ext||"")+" "+(this.flags$own||"")+" "+(this.$flags||"")}})},function(c,d,j){j.r(d);var g=j(6);function l(e){return e?e.toIterable?e.toIterable():e:[]}const n=new(globalThis.WeakMap||Map)(),r={threshold:[0]},i={};g.Event.intersect$handle=function(){let e=this.event.detail.observer;return this.modifiers._observer==e},g.Event.intersect$in=function(){return this.event.delta>=0&&this.event.entry.isIntersecting},g.Event.intersect$out=function(){return this.event.delta<0};function h(e,s){return function(a,b){let p=b.prevRatios||(b.prevRatios=new WeakMap());for(let t=0,k=l(a),u=k.length;t<u;t++){let x=k[t],o=p.get(x.target)||0,z=x.intersectionRatio,C={entry:x,ratio:z,from:o,delta:z-o,observer:b},B=new g.CustomEvent(e,{bubbles:!1,detail:C});B.entry=x,B.isIntersecting=x.isIntersecting,B.delta=C.delta,B.ratio=C.ratio,p.set(x.target,z),x.target.dispatchEvent(B)}return}}function f(e=r){let s=e.threshold.join("-")+e.rootMargin,a=e.root||i,b=n.get(a);return b||n.set(a,b={}),b[s]||(b[s]=new IntersectionObserver(h("intersect"),e))}g.Element.prototype.on$intersect=function(e,s){let a;if(e.options){let b=[],p={threshold:b};for(let t=0,k=l(e.options),u=k.length;t<u;t++){let x=k[t];x instanceof g.Element?p.root=x:typeof x=="number"&&b.push(x)}if(b.length==1){let t=b[0];if(t>1)for(b[0]=0;b.length<t;)b.push(b.length/(t-1))}b.length==0&&b.push(0),a=f(p)}else a=f();return e._observer=a,a.observe(this)}},function(c,d,j){j.r(d);var g=j(6),l;function n(){if(!l)return l=function(r){if(r.handled$)return;r.handled$=!0;let i=document.activeElement;if(i&&i.matches("input,textarea")){let h=new g.CustomEvent("selection",{detail:{start:i.selectionStart,end:i.selectionEnd}});return i.dispatchEvent(h)}},document.addEventListener("selectionchange",l)}g.Element.prototype.on$selection=function(r,i){return n()}},function(c,d,j){j.r(d);var g=j(6);function l(h,f){var e=Object.getOwnPropertyDescriptors(f);return Object.defineProperties(h.prototype,e),h}function n(h){return h?h.toIterable?h.toIterable():h:[]}var r=null;function i(){return globalThis.ResizeObserver||(r||(console.warn(":resize not supported in this browser"),r={observe:function(){return!0}})),r||(r=new ResizeObserver(function(h){for(let f=0,e=n(h),s=e.length;f<s;f++){let a=e[f],b=new g.CustomEvent("resize",{bubbles:!1,detail:a});b.entry=a,b.rect=a.contentRect,b.width=a.target.offsetWidth,b.height=a.target.offsetHeight,a.target.dispatchEvent(b)}return}))}l(g.Element,{on$resize(h,f){return i().observe(this)}})}]);function Y(c){return c?c.toIterable?c.toIterable():c:[]}var Pd=typeof window!=="undefined"?window:typeof global!=="undefined"?global:null;class Z{constructor(c){this.theme_start=!1,this.current_theme=1,this.renderer=c,this.current_date=new Date(),STATE.first_date=new Date(),STATE.last_date=new Date(),window.addEventListener("keydown",this.keydownEvent.bind(this)),window.addEventListener("keyup",this.keyupEvent.bind(this)),window.addEventListener("mousemove",this.mousemoveEvent.bind(this)),window.addEventListener("mousedown",this.mousedownEvent.bind(this)),window.addEventListener("mouseup",this.mouseupEvent.bind(this)),setInterval(this.update.bind(this),16)}playTheme(){let c=new Audio("sounds/theme0"+this.current_theme+".ogg");return c.onended=this.playNext.bind(this),c.play()}playNext(){this.current_theme++,this.current_theme==8&&(this.current_theme=0);let c=new Audio("sounds/theme0"+this.current_theme+".ogg");return c.onended=this.playNext.bind(this),c.play()}startGame(){return STATE.loading=!1,imba.commit()}update(){this.current_date=new Date(),STATE.delta=(this.current_date-STATE.last_date)/5,STATE.time=this.current_date-STATE.first_date,STATE.last_date=this.current_date,STATE.player.update();for(let c of Y(STATE.bullets))c&&c.update();for(let c of Y(STATE.player.nearZombies))c&&c.update();for(let c of Y(STATE.killed))c&&c.update();return this.renderer.render()}keydownEvent(c){return this.theme_start||this.playTheme(),this.theme_start||(this.theme_start=!0),STATE.player.onKeyEvent(c.code),STATE.keys[c.code]=!0}keyupEvent(c){return STATE.keys[c.code]=!1}mousemoveEvent(c){return STATE.mouse.x=c.clientX,STATE.mouse.y=window.innerHeight-c.clientY}mousedownEvent(c){return STATE.mouse.press=!0}mouseupEvent(c){return STATE.mouse.press=!1}}Pd.Game=Z;class I{static randomPosition(c){let d=Math.random()*window.innerWidth*100-window.innerWidth*50,j=Math.random()*window.innerHeight*100-window.innerHeight*50,g=Math.abs(d-c.position.x),l=Math.abs(j-c.position.y);return g<400&&l<400?this.randomPosition(c):{x:d,y:j}}currentSector(){return""+~~(this.position.x/1e3)+"|"+~~(this.position.y/800)}colideCircle(c){return Math.sqrt(this.distanceToObjectX(c)**2+this.distanceToObjectY(c)**2)<this.size+c.size}colideQuad(c){return this.distanceToObjectX()<c.size+this.size&&this.distanceToObjectY()<c.size+this.size}distanceToObjectX(c){return Math.abs(c.position.x-this.position.x)}distanceToObjectY(c){return Math.abs(c.position.y-this.position.y)}moveForward(){return this.position.x-=Math.sin((this.rotation-90)*.01745)*STATE.delta*this.speed,this.position.y+=Math.cos((this.rotation-90)*.01745)*STATE.delta*this.speed}angleToObject(c){let d=c.position.x-this.position.x,j=c.position.y-this.position.y;return-(Math.atan2(d,j)/.01745-90)%360}angleTo(c,d){let j=c-this.position.x,g=d-this.position.y;return-(Math.atan2(j,g)/.01745+180)%360}distanceTo(c,d){let j=Math.abs(c-this.position.x),g=Math.abs(d-this.position.y);return Math.sqrt(j**2+g**2)}}function Od(c){return c?c.toIterable?c.toIterable():c:[]}class Bb extends I{constructor(c,d,j,g,l){super(...arguments);this.spread=c,this.damage=d,this.power=j,this.speed=g,this.penetration=l,this.position={x:STATE.player.position.x+Math.cos((STATE.player.rotation+60)*.01745)*30,y:STATE.player.position.y+Math.sin((STATE.player.rotation+60)*.01745)*30},this.rotation=STATE.player.rotation+90+(Math.random()*c-c/2)}update(){this.checkColision(),this.position.x+=Math.cos(this.rotation*.01745)*this.speed*STATE.delta,this.position.y+=Math.sin(this.rotation*.01745)*this.speed*STATE.delta;if(this.distanceToObjectX(STATE.player)>window.innerWidth||this.distanceToObjectY(STATE.player)>window.innerHeight)return STATE.bullets.delete(this)}checkColision(){var c;c=[];for(let d of Od(STATE.zombies[this.currentSector()]))c.push(this.distanceToObjectX(d)<this.speed*2&&this.distanceToObjectY(d)<this.speed*2&&(d.takeHit(this),this.penetration--,this.penetration<=0&&STATE.bullets.delete(this)));return c}}class N{constructor(c,d,j,g,l,n,r,i,h,f,e=1,s){this.rate=d,this.spread=j,this.damage=g,this.power=l,this.last_shot=0,this.projectiles=n,this.speed=r,this.reload_time=i,this.cap=c,this.ammo=c,this.reloading=!1,this.name=h,this.price=f,this.penetration=e,this.sounds=s,this.upgrades={},this.upgrades.cap=100+f/10,this.upgrades.rate=100+f/10,this.upgrades.spread=100+f/10,this.upgrades.damage=100+f/10,this.upgrades.power=100+f/10,this.upgrades.reload_time=100+f/10}fire(){var c=this,d;if(this.reloading)return;if(this.ammo==0)return this.reload();if(STATE.time-this.last_shot>6e4/this.rate&&this.ammo>0){let j=new Audio(this.sounds.shot.src);j.volume=this.sounds.shot.volume,j.play(),this.firing=!0,setTimeout(function(){return c.firing=!1},33),this.ammo--,this.last_shot=STATE.time,d=[];for(let g=this.projectiles,l=0,n=g-l;n>0?l<g:l>g;n>0?l++:l--)d.push(STATE.bullets.add(new Bb(this.spread,this.damage,this.power,this.speed,this.penetration)));return d}}reload(){if(this.ammo!=this.cap)return this.reloading=this.reload_time}update(){if(this.reloading){(!this.reload_audio||this.reload_audio.paused)&&(this.reload_audio=new Audio(this.sounds.reload.src),this.reload_audio.volume=this.sounds.reload.volume,this.reload_audio.play()),this.reloading-=STATE.delta*5;if(this.reloading<=0)return this.reloading=!1,this.ammo=this.cap}}}function Cb(c){return c?c.toIterable?c.toIterable():c:[]}class Db extends I{constructor(c,d,j){super(...arguments);this.position={x:0,y:0},this.rotation=0,this.size=20,this.inventory=c,this.score=1e5,this.gun=c[0],this.holsters=c,this.speed=0,this.maxSpeed=.8,this.nearZombies=new Set(),this.nearBushes=new Set(),this.nearBarrels=new Set(),this.maxLife=100,this.life=100,this.slots=3,this.safe=!0,this.stamina=300,this.maxStamina=500,this.animations=d,this.animation=d.rifle.idle,this.animationState="idle",this.feetAnimations=j,this.feetAnimation=j.idle,this.feetAnimationState="idle"}checkShop(){if(!this.inSafeZone())return STATE.shop.open=!1}update(){return this.dead?void 0:(this.gun.update(),this.move(),this.rotate(),this.shoot(),this.updateNearObjects(STATE.bushes,this.nearBushes),this.updateNearObjects(STATE.zombies,this.nearZombies),this.updateNearObjects(STATE.barrels,this.nearBarrels),this.checkColision(STATE.bushes),this.checkColision(STATE.zombies),this.checkColision(STATE.barrels),this.checkShop(),this.gun.reloading&&(this.animationState="reload"),this.animation=this.animations[this.gun.name][this.animationState],this.feetAnimation=this.feetAnimations[this.feetAnimationState])}updateNearObjects(c,d){var j,g,l;let n=~~(this.position.x/1e3),r=~~(this.position.y/800);d.clear(),l=[];for(let i=0,h=[-1,0,1],f=h.length;i<f;i++){let e=h[i];g=[];for(let s=0,a=[-1,0,1],b=a.length;s<b;s++){let p=a[s];j=[];for(let t of Cb(c[""+(n+e)+"|"+(r+p)]))j.push(d.add(t));g.push(j)}l.push(g)}return l}shoot(){if(this.inSafeZone())return;if(STATE.mouse.press)return this.gun.fire()}rotate(){let c=STATE.mouse.x-window.innerWidth/2,d=STATE.mouse.y-window.innerHeight/2;return this.rotation=-Math.atan2(c,d)*57.2974694}move(){let c,d=~~STATE.keys.KeyA+~~STATE.keys.KeyD+~~STATE.keys.KeyW+~~STATE.keys.KeyS;d&&STATE.keys.ShiftLeft&&this.stamina?(this.stamina--,this.speed<this.maxSpeed&&(this.speed+=this.maxSpeed/20),this.animationState="move",this.feetAnimationState="run"):d?(this.stamina>=this.maxStamina||STATE.keys.ShiftLeft||this.stamina++,this.speed<this.maxSpeed/2&&(this.speed+=this.maxSpeed/20),this.speed>=this.maxSpeed/2&&(this.speed-=this.maxSpeed/20),this.animationState="move",this.feetAnimationState="walk"):(this.stamina>=this.maxStamina||STATE.keys.ShiftLeft||this.stamina++,this.speed=0,this.feetAnimationState="idle",this.animationState="idle"),(STATE.keys.KeyA||0)+(STATE.keys.KeyD||0)+(STATE.keys.KeyW||0)+(STATE.keys.KeyS||0)>1?c=.707:c=1,STATE.keys.KeyA&&(this.position.x-=this.speed*STATE.delta*c),STATE.keys.KeyD&&(this.position.x+=this.speed*STATE.delta*c),STATE.keys.KeyW&&(this.position.y+=this.speed*STATE.delta*c);if(STATE.keys.KeyS)return this.position.y-=this.speed*STATE.delta*c}checkColision(c){var d,j;c[j=this.currentSector()]||(c[j]=new Set()),d=[];for(let g of Cb(c[this.currentSector()]))d.push(this.colideCircle(g)&&(this.position.x-=Math.sin((this.angleToObject(g)+90)*.01745)*(g.speed*1.5||this.speed)*STATE.delta*1.8,this.position.y+=Math.cos((this.angleToObject(g)+90)*.01745)*(g.speed*1.5||this.speed)*STATE.delta*1.8));return d}changeGun(c){new Audio("sounds/weapswitch.ogg").play();if(this.holsters[c])return this.gun.reloading=!1,this.gun=this.holsters[c]}onKeyEvent(c){var d=this;let j={Digit1:function(){return d.changeGun(0)},Digit2:function(){return d.changeGun(1)},Digit3:function(){return d.changeGun(2)},Digit4:function(){return d.changeGun(3)},Digit5:function(){return d.changeGun(4)},KeyR:function(){return d.gun.reload()}};return j[c]&&j[c]()}takeHit(c){if(this.dead)return;new Audio("sounds/survivor_yell/3yell"+~~(Math.random()*10)+".wav").play(),this.life-=c;if(this.life<=0)return this.dead=!0}inSafeZone(){return Math.abs(this.position.x)<100&&Math.abs(this.position.y)<100}usingGun(c){return this.holsters.find(function(d){return d==c})}equip(c){return this.holsters.find(function(d){return d==c})?void 0:(this.holsters[this.slots-1]&&this.holsters.pop(),this.holsters.unshift(c),this.gun=c)}}function Qd(c){return c?c.toIterable?c.toIterable():c:[]}let Eb=0,O=1,Fb=2,Gb=3;class P extends I{constructor(c,d,j){super(...arguments);this.player=c,this.position=I.randomPosition(c),this.rotation=Math.random()*360,this.sector=""+~~(this.position.x/1e3)+"|"+~~(this.position.y/800),this.state=0,this.speed=.2,this.base_speed=.2,this.max_speed=.6+d/20,this.size=20,this.turn=0,this.life=50+d*3,this.death=0,this.animations=j,this.animation=j.idle,this.animationSTATE="idle"}update(){return this.updateSector(),this.checkColisions(),this.state===Gb&&this.execDead(),this.state===Eb&&this.execDrift(),this.state===O&&this.execAggro(),this.state===Fb&&this.execAttack(),this.animation=this.animations[this.animationSTATE]}execDead(){var c;if(STATE.time-this.death>5e3)return STATE.killed.delete(this),c=this,delete this,c}execAttack(){this.animationSTATE="attack",this.start_attack||(new Audio("sounds/zombie_attack/"+~~(Math.random()*3)+".ogg").play(),this.start_attack=STATE.time),STATE.time-this.start_attack>100&&this.playerIsClose(this.size*2)&&!this.player_beaten&&(this.player_beaten=!0,this.player.takeHit(10));if(STATE.time-this.start_attack>500)return this.start_attack=!1,this.player_beaten=!1,this.speed=0,this.state=O}execDrift(){return this.playerDetected()&&(this.state=O),STATE.time%200==0&&(this.turn=Math.floor(Math.random()*2),this.speed=Math.random()*this.base_speed,this.speed<.1?this.animationSTATE="idle":this.animationSTATE="move"),STATE.time%3==0&&(this.turn==0?this.rotation+=Math.random()*3:this.turn==1&&(this.rotation-=Math.random()*3)),this.moveForward()}execAggro(){return this.animationSTATE="move",this.player.inSafeZone()&&(this.state=Eb),this.playerIsClose(this.size*2.1)&&(this.state=Fb),this.speed<this.max_speed&&(this.speed+=this.max_speed/12),this.rotation=this.angleToObject(this.player),this.moveForward()}findColision(c){var d;c[d=this.sector]||(c[d]=new Set());for(let j of Qd(c[this.sector]))if(this.colideCircle(j)){if(!(j===this))return j}return!1}playerOnSight(){return Math.abs((this.angleToObject(this.player)-this.rotation)%360)<30}playerIsClose(c){return this.distanceToObjectX(this.player)<c&&this.distanceToObjectY(this.player)<c}playerDetected(){return(this.playerOnSight()&&this.playerIsClose(750)||this.playerIsClose(40))&&!this.player.inSafeZone()}updateSector(){var c,d,j,g;let l=this.currentSector();if(l!=this.sector)return(c=STATE.zombies)[d=this.sector]||(c[d]=new Set()),STATE.zombies[this.sector].delete(this),this.sector=l,(j=STATE.zombies)[g=this.sector]||(j[g]=new Set()),STATE.zombies[this.sector].add(this)}checkColisions(){let c=this.findColision(STATE.bushes)||this.findColision(STATE.barrels);if(c){let j=Math.sin((this.angleToObject(c)+90)*.01745)*this.speed*STATE.delta,g=Math.cos((this.angleToObject(c)+90)*.01745)*this.speed*STATE.delta;this.position.x-=j*1.5,this.position.y+=g*1.5}let d=this.findColision(STATE.zombies);if(d){let j=Math.sin((this.angleToObject(d)+90)*.01745)*this.speed*STATE.delta,g=Math.cos((this.angleToObject(d)+90)*.01745)*this.speed*STATE.delta;return d.position.x+=j*.5,d.position.y-=g*.5,this.position.x-=j,this.position.y+=g}}takeHit(c){var d=this;this.findColision(STATE.bushes)||(this.position.x-=Math.sin((c.rotation-90)*.01745)*c.power,this.position.y+=Math.cos((c.rotation-90)*.01745)*c.power),this.state=O,this.life-=c.damage,this.speed>=0&&(this.speed-=c.power/30),this.taking_hit||(new Audio("sounds/zombie_hit/"+~~(Math.random()*4)+".wav").play(),new Audio("sounds/zombie_sound/"+~~(Math.random()*6)+".mp3").play()),this.taking_hit=!0,setTimeout(function(){return d.taking_hit=!1},50);if(this.life<=0)return STATE.zombies[this.sector].delete(this),STATE.killed.add(this),this.state=Gb,this.player.score+=90+10*STATE.day,this.death=STATE.time}}class _ extends I{constructor(c,d){super(...arguments);this.position=I.randomPosition(c),this.rotation=0,this.size=d}}function $(c){return c?c.toIterable?c.toIterable():c:[]}var Hb,Ib,Jb;let Q={player:{knife:{idle:{path:"textures/knife/idle/survivor-idle_knife_",name:"knife-idle",size:19,frameLength:3,adjust:{scale:"1.15,1.15",translate:"-5,0"}},move:{path:"textures/knife/move/survivor-move_knife_",name:"knife-move",size:19,frameLength:3,adjust:{scale:"1.15,1.15",translate:"-5,0"}},attack:{path:"textures/knife/meleeattack/survivor-meleeattack_knife_",name:"knife-meleeattack",size:14,frameLength:2,adjust:{scale:"1.3,1.3",translate:"-5,5"}}},handgun:{idle:{path:"textures/handgun/idle/survivor-idle_handgun_",name:"handgun-idle",size:19,frameLength:3,adjust:{scale:"-0.8,0.8",translate:"0,5"}},move:{path:"textures/handgun/move/survivor-move_handgun_",name:"handgun-move",size:19,frameLength:3,adjust:{scale:"-0.8,0.8",translate:"0,5"}},attack:{path:"textures/handgun/meleeattack/survivor-meleeattack_handgun_",name:"handgun-meleeattack",size:14,frameLength:2,adjust:{scale:"-0.8,0.8",translate:"0,5"}},shoot:{path:"textures/handgun/shoot/survivor-shoot_handgun_",name:"handgun-shoot",size:2,frameLength:3,adjust:{scale:"-0.8,0.8",translate:"0,5"}},reload:{path:"textures/handgun/reload/survivor-reload_handgun_",name:"handgun-reload",size:14,frameLength:3,adjust:{scale:"-0.8,0.8",translate:"0,5"}}},rifle:{idle:{path:"textures/rifle/idle/survivor-idle_rifle_",name:"rifle-idle",size:19,frameLength:3,adjust:{scale:"-1,1",translate:"0,16"}},move:{path:"textures/rifle/move/survivor-move_rifle_",name:"rifle-move",size:19,frameLength:3,adjust:{scale:"-1,1",translate:"0,16"}},attack:{path:"textures/rifle/meleeattack/survivor-meleeattack_rifle_",name:"rifle-meleeattack",size:14,frameLength:2,adjust:{scale:"-1,1",translate:"0,16"}},shoot:{path:"textures/rifle/shoot/survivor-shoot_rifle_",name:"rifle-shoot",size:2,frameLength:3,adjust:{scale:"-1,1",translate:"0,16"}},reload:{path:"textures/rifle/reload/survivor-reload_rifle_",name:"rifle-reload",size:14,frameLength:3,adjust:{scale:"-1,1",translate:"0,16"}}},shotgun:{idle:{path:"textures/shotgun/idle/survivor-idle_shotgun_",name:"shotgun-idle",size:19,frameLength:3,adjust:{scale:"-1,1",translate:"0,16"}},move:{path:"textures/shotgun/move/survivor-move_shotgun_",name:"shotgun-move",size:19,frameLength:3,adjust:{scale:"-1,1",translate:"0,16"}},attack:{path:"textures/shotgun/meleeattack/survivor-meleeattack_shotgun_",name:"shotgun-meleeattack",size:14,frameLength:2,adjust:{scale:"-1,1",translate:"0,16"}},shoot:{path:"textures/shotgun/shoot/survivor-shoot_shotgun_",name:"shotgun-shoot",size:2,frameLength:3,adjust:{scale:"-1,1",translate:"0,16"}},reload:{path:"textures/shotgun/reload/survivor-reload_shotgun_",name:"shotgun-reload",size:14,frameLength:3,adjust:{scale:"-1,1",translate:"0,16"}}},flashlight:{idle:{path:"textures/flashlight/idle/survivor-idle_flashlight_",name:"flashlight-idle",size:19,frameLength:3,adjust:{scale:"1.25,1.25",translate:"0,-10"}},move:{path:"textures/flashlight/move/survivor-move_flashlight_",name:"flashlight-move",size:19,frameLength:3,adjust:{scale:"1.25,1.25",translate:"0,-10"}},attack:{path:"textures/flashlight/meleeattack/survivor-meleeattack_flashlight_",name:"flashlight-meleeattack",size:14,frameLength:2,adjust:{scale:"1.25,1.25",translate:"-5,-10"}}}},feet:{idle:{path:"textures/feet/idle/survivor-idle_",name:"feet-idle",size:1,frameLength:3,adjust:{scale:"-0.6,0.6",translate:"3,0"}},run:{path:"textures/feet/run/survivor-run_",name:"feet-run",size:19,frameLength:3,adjust:{scale:"-0.6,0.6",translate:"3,0"}},walk:{path:"textures/feet/walk/survivor-walk_",name:"feet-walk",size:19,frameLength:3,adjust:{scale:"-0.6,0.6",translate:"3,0"}},strafe_left:{path:"textures/feet/strafe_left/survivor-strafe_left_",name:"feet-strafe_left",size:19,frameLength:3,adjust:{scale:"-0.6,0.6",translate:"3,0"}},strafe_right:{path:"textures/feet/strafe_right/survivor-strafe_right_",name:"feet-strafe_right",size:19,frameLength:3,adjust:{scale:"-0.7,0.7",translate:"3,0"}}},zombie:{idle:{path:"textures/zombie/idle/skeleton-idle_",name:"idle",size:16,frameLength:5,adjust:{scale:".70,.70",translate:"6,-1"}},attack:{path:"textures/zombie/attack/skeleton-attack_",name:"attack",size:8,frameLength:5,adjust:{scale:".94,.94",translate:"6,-1"}},move:{path:"textures/zombie/move/skeleton-move_",name:"move",size:16,frameLength:5,adjust:{scale:".92,.92",translate:"6,-1"}}}};var aa=[new N(12,150,8,13,20,1,12,1e3,"handgun",500,1,{shot:{src:"sounds/pistol_shot.ogg",volume:1},reload:{src:"sounds/reload.ogg",volume:1}}),new N(5,60,15,12,16,6,12,2200,"shotgun",2e4,1,{shot:{src:"sounds/shotgun_shot.ogg",volume:1},reload:{src:"sounds/reload.ogg",volume:1}}),new N(15,500,10,40,28,1,22,1500,"rifle",3e4,3,{shot:{src:"sounds/rifle_shot.ogg",volume:1},reload:{src:"sounds/reload.ogg",volume:1}})],R=new Db(aa,Q.player,Q.feet);let S={};for(let c=0,d=$(Array.from(new Array(5e4).keys())),j=d.length;c<j;c++){let g=d[c],l=new P(R,1,Q.zombie);S[Hb=l.currentSector()]||(S[Hb]=new Set()),S[l.currentSector()].add(l)}let T={};for(let c=0,d=$(Array.from(new Array(2e5).keys())),j=d.length;c<j;c++){let g=d[c],l=new _(R,50);T[Ib=l.currentSector()]||(T[Ib]=new Set()),T[l.currentSector()].add(l)}let U={};for(let c=0,d=$(Array.from(new Array(2e4).keys())),j=d.length;c<j;c++){let g=d[c],l=new _(R,20);U[Jb=l.currentSector()]||(U[Jb]=new Set()),U[l.currentSector()].add(l)}globalThis.STATE={game:Z,time:0,keys:[],mouse:{x:0,y:0},player:R,bullets:new Set(),camera:{},zombies:S,killed:new Set(),delta:1,day:1,bushes:T,barrels:U,svg:{height:1,width:1},store:aa.slice(1,aa.len),shop:{guns:[],upgradeGun:null,health:500,speed:500,maxStamina:500,slots:5e3},animations:Q};var Kb=Symbol(),Lb=Symbol(),Mb=Symbol(),Nb=Symbol(),Ob=Symbol(),Pb=Symbol(),Qb=Symbol(),Ae=Symbol(),ba=Symbol(),Rb=Symbol(),Sb=Symbol(),Tb=Symbol(),Be=Symbol(),ca=Symbol(),Ub=Symbol(),Vb=Symbol(),Wb=Symbol(),Xb=Symbol(),Yb=Symbol(),Ce=Symbol(),da=Symbol(),De=Symbol(),ea=Symbol(),Zb=Symbol(),_b=Symbol(),$b=Symbol(),ac=Symbol(),bc=Symbol(),cc=Symbol(),dc=Symbol(),ec=Symbol(),fc=Symbol(),gc=Symbol(),hc=Symbol(),ic=Symbol(),jc=Symbol(),kc=Symbol(),lc=Symbol(),mc=Symbol(),Ee=Symbol(),fa=Symbol(),nc=Symbol(),Fe=Symbol(),ga=Symbol(),oc=Symbol(),pc=Symbol(),qc=Symbol(),rc=Symbol(),sc=Symbol(),tc=Symbol(),uc=Symbol(),vc=Symbol(),wc=Symbol(),xc=Symbol(),yc=Symbol(),zc=Symbol();class Rd extends imba.tags.get("component","ImbaElement"){mount(){return setInterval(this.update.bind(this),200),this.update()}update(){return this.fps=~~(1/(STATE.delta/200)),this.fps<50?this.color="#F99":this.fps<60?this.color="#FF9":this.color="#9F9"}render(){var c,d,j,g;return c=this,c.open$(),(d=j=1,c[Kb]===1)||(d=j=0,c[Kb]=1),g="color: "+this.color+";position: fixed; margin: 5px",g===c[Lb]||(c.style=c[Lb]=g),g=this.fps,g===c[Nb]&&d||(c[Mb]=c.insert$(c[Nb]=g,384,c[Mb])),c.close$(j),c}}imba.tags.define("fps-counter",Rd,{});class Sd extends imba.tags.get("component","ImbaElement"){mount(){return this.bounce=!0,this.score=STATE.player.score,setInterval(this.checkScoreChange.bind(this,100))}checkScoreChange(){var c=this;if(this.score!=STATE.player.score)return this.diff=STATE.player.score-this.score,this.score=STATE.player.score,this.bounce=!1,this.render(),setTimeout(function(){return c.bounce=!0,c.render()},100)}render(){var c,d,j,g=this._ns_||"",l,n,r,i,h,f,e,s;return c=this,c.open$(),(d=j=1,c[Ob]===1)||(d=j=0,c[Ob]=1),(!d||j&2)&&c.flagSelf$("hud score"),(l=c[Pb])||(c[Pb]=l=imba.createElement("div",c,`${g}`,null)),d||l.insert$("Score "),(r=i=1,n=c[Qb])||(r=i=0,c[Qb]=n=imba.createElement("b",l,`${g}`,null)),h=this.bounce||void 0,h===c[ba]||(i|=2,c[ba]=h),i&2&&n.flag$(`${g} `+(c[ba]?"bounce":"")),h=this.score,h===c[Sb]&&r||(c[Rb]=n.insert$(c[Sb]=h,384,c[Rb])),(f=e=1,l=c[Tb])||(f=e=0,c[Tb]=l=imba.createElement("div",c,`ypyyj2de ${g}`,null)),s=this.bounce||void 0,s===c[ca]||(e|=2,c[ca]=s),e&2&&l.flag$(`ypyyj2de ${g} `+(c[ca]?"fadeOutUp":"")),f||l.insert$("+ "),s=this.diff,s===c[Vb]&&f||(c[Ub]=l.insert$(c[Vb]=s,256,c[Ub])),c.close$(j),c}}imba.tags.define("score-hud",Sd,{});class Td extends imba.tags.get("component","ImbaElement"){init$(){super.init$(),this.selected_gun=void 0,this.stamina=void 0}calcStamina(){return~~(STATE.player.stamina/STATE.player.maxStamina*100)}render(){var c,d,j,g,l=this._ns_||"",n,r,i,h,f,e,s,a,b,p,t,k,u,x,o,z,C,B;d=this,d.open$(),(j=g=1,d[Wb]===1)||(j=g=0,d[Wb]=1),(r=i=1,n=d[Xb])||(r=i=0,d[Xb]=n=imba.createComponent("fps-counter",d,`${l}`,null)),r||!n.setup||n.setup(i),n.end$(i),r||n.insertInto$(d),(r=i=1,n=d[Yb])||(r=i=0,d[Yb]=n=imba.createElement("div",d,`${l}`,null)),h=STATE.player.dead||void 0,h===d[da]||(i|=2,d[da]=h),h=!STATE.player.dead||void 0,h===d[ea]||(i|=2,d[ea]=h),i&2&&n.flag$(`${l} `+(d[da]?"fadeOut":"")+" "+(d[ea]?"fadeIn":"")),(e=s=1,f=d[Zb])||(e=s=0,d[Zb]=f=imba.createElement("div",n,`hud day ${l}`,null)),e||f.css$("font-size","30px"),e||f.insert$("Day "),(a=d[_b])||(d[_b]=a=imba.createElement("b",f,`${l}`,null)),b=STATE.day,b===d[ac]&&e||(d[$b]=a.insert$(d[ac]=b,384,d[$b])),(e=s=1,f=d[bc])||(e=s=0,d[bc]=f=imba.createElement("div",n,`hud stamina ${l}`,null)),e||f.css$("font-size","20px"),p=""+(this.calcStamina()<1?"red":"white"),p===d[cc]||f.css$("color",d[cc]=p),e||f.insert$("Stamina "),(a=d[dc])||(d[dc]=a=imba.createElement("b",f,`${l}`,null)),imba.ctx=d[fc]||(d[fc]={_:a}),b=this.calcStamina(),imba.ctx=null,b===d[gc]&&e||(d[ec]=a.insert$(d[gc]=b,128,d[ec])),e||a.insert$("%"),(e=s=1,f=d[hc])||(e=s=0,d[hc]=f=imba.createComponent("score-hud",n,`${l}`,null)),e||!f.setup||f.setup(s),f.end$(s),e||f.insertInto$(n),(f=d[ic])||(d[ic]=f=imba.createElement("div",n,`hud life ${l}`,null)),r||f.insert$("Life "),(t=k=1,a=d[jc])||(t=k=0,d[jc]=a=imba.createElement("b",f,`${l}`,null)),t||a.css$("font-size","50px"),b=STATE.player.life,b===d[lc]&&t||(d[kc]=a.insert$(d[lc]=b,384,d[kc])),(e=s=1,f=d[mc])||(e=s=0,d[mc]=f=imba.createElement("div",n,`hud slots ${l}`,null)),p=this.selected_gun||void 0,p===d[fa]||(s|=2,d[fa]=p),s&2&&f.flag$(`hud slots ${l} `+(d[fa]?"select-slot":"")),(a=d[nc])||(d[nc]=a=imba.createIndexedFragment(384,f)),u=0,x=a.$;for(let m=STATE.player.slots,q=0,v=m-q;v>0?q<m:q>m;v>0?q++:q--)(z=C=1,o=x[u])||(z=C=0,x[u]=o=imba.createElement("div",a,`${l}`,null)),z||(o.up$=a),B=STATE.player.gun==STATE.player.holsters[q]||void 0,B===o[ga]||(C|=2,o[ga]=B),C&2&&o.flag$(`${l} `+(o[ga]?"onHand":"")),B=q+1,B===o[pc]&&z||(o[oc]=o.insert$(o[pc]=B,128,o[oc])),z||o.insert$(". "),B=(STATE.player.holsters[q]||{}).name||"",B===o[rc]&&z||(o[qc]=o.insert$(o[rc]=B,256,o[qc])),u++;return a.end$(u),(f=d[sc])||(d[sc]=f=imba.createElement("div",n,`hud ammo ${l}`,null)),(t=k=1,a=d[tc])||(t=k=0,d[tc]=a=imba.createElement("b",f,`${l}`,null)),t||a.css$("font-size","50px"),b=STATE.player.gun.ammo,b===d[vc]&&t||(d[uc]=a.insert$(d[vc]=b,128,d[uc])),t||a.insert$("/"),b=STATE.player.gun.cap,b===d[xc]&&t||(d[wc]=a.insert$(d[xc]=b,256,d[wc])),r||f.insert$(" Ammo"),c=null,STATE.player.dead&&((e=s=1,c=d[yc])||(e=s=0,d[yc]=c=imba.createElement("div",null,`you-died fadeIn ${l}`,"you died")),e||(c.up$=d)),d[zc]=d.insert$(c,0,d[zc]),d.close$(g),d}}imba.tags.define("player-hud",Td,{ns:"ypyyj2h"});imba.inlineStyles(`.ypyyj2de:not(#_):not(#_) {text-align: right;
font-size: 20px;}

.you-died.ypyyj2h:not(#_) {left: 33%;
top: 20%;
font-size: 15vw;
color: #900;
position: fixed;
z-index: 1;
font-family: var(--font-MenofNihilist,MenofNihilist);}

.hud.ypyyj2h:not(#_) {position: fixed;
z-index: 1;
font-family: var(--font-Typewriter,Typewriter);
color: hsla(0.00,0.00%,100.00%,100%);}

.day.ypyyj2h:not(#_) {top: 2%;
left: 2%;}

.stamina.ypyyj2h:not(#_) {bottom: 10%;
right: 2%;
font-size: 15px;}

.score.ypyyj2h:not(#_) {top: 2%;
right: 2%;
font-size: 30px;}

.life.ypyyj2h:not(#_) {bottom: 2%;
right: 2%;
font-size: 30px;}

.slots.ypyyj2h:not(#_) {left: 2%;
bottom: 10%;
font-size: 16px;}

.select-slot.ypyyj2h:not(#_) {color: green;}

.ammo.ypyyj2h:not(#_) {bottom: 2%;
left: 2%;
font-size: 30px;}

.onHand.ypyyj2h:not(#_) {color: yellow;}

`);function ha(c){return c?c.toIterable?c.toIterable():c:[]}var Ac=Symbol(),He=Symbol(),ia=Symbol(),Bc=Symbol(),Ie=Symbol(),ja=Symbol(),Cc=Symbol(),Dc=Symbol(),Ec=Symbol(),Fc=Symbol(),Gc=Symbol(),Hc=Symbol(),Ic=Symbol(),Jc=Symbol(),Kc=Symbol(),Lc=Symbol(),Mc=Symbol(),Nc=Symbol(),Oc=Symbol(),Pc=Symbol(),Qc=Symbol(),Rc=Symbol(),Sc=Symbol(),Tc=Symbol(),Uc=Symbol(),Vc=Symbol(),Wc=Symbol(),Xc=Symbol(),Yc=Symbol(),Zc=Symbol(),_c=Symbol(),Je=Symbol(),ka=Symbol(),$c=Symbol(),ad=Symbol(),bd=Symbol(),cd=Symbol(),dd=Symbol(),ed=Symbol(),fd=Symbol(),gd=Symbol(),hd=Symbol(),id=Symbol(),jd=Symbol(),kd=Symbol(),ld=Symbol(),md=Symbol(),nd=Symbol(),od=Symbol(),pd=Symbol(),qd=Symbol(),rd=Symbol(),sd=Symbol(),td=Symbol(),ud=Symbol(),vd=Symbol(),wd=Symbol(),xd=Symbol(),yd=Symbol(),zd=Symbol(),Ad=Symbol(),Bd=Symbol(),Cd=Symbol(),Dd=Symbol(),Ed=Symbol(),Fd=Symbol(),Gd=Symbol(),Hd=Symbol(),Id=Symbol();class Ud extends imba.tags.get("component","ImbaElement"){buyGun(c){if(c.price<=STATE.player.score){STATE.player.score-=c.price;var d=STATE.store.indexOf(c);return d!=-1&&STATE.store.splice(d,1),STATE.player.inventory.push(c)}}upgradeGun(c){return STATE.shop.upgradeGun=c}equipGun(c){return STATE.player.equip(c)}toggleShop(){if(STATE.player.inSafeZone())return STATE.shop.open=!STATE.shop.open}nextDay(){var c,d;for(let j=STATE.zombies,g=0,l=Object.keys(j),n=l.length,r,i;g<n;g++)r=l[g],i=j[r],i.clear();for(let j=0,g=ha(Array.from(Array(5e4+5e3*STATE.day**1.4))),l=g.length;j<l;j++){let n=g[j],r=new P(STATE.player,STATE.day,STATE.animations.zombie);(c=STATE.zombies)[d=r.currentSector()]||(c[d]=new Set()),STATE.zombies[r.currentSector()].add(r)}return STATE.shop.open=!1}healPlayer(){return STATE.player.score<STATE.day*40?void 0:(STATE.player.score-=STATE.day*40,STATE.player.life=STATE.player.maxLife)}buyAmmo(){return STATE.player.score<STATE.day*200?void 0:(STATE.player.score-=STATE.day*200,STATE.player.life=STATE.player.maxLife)}upgradeHealth(){return STATE.player.score<STATE.shop.health?void 0:(STATE.player.score-=STATE.shop.health,STATE.player.maxLife+=10,STATE.shop.health*=2)}upgradeSpeed(){return STATE.player.score<STATE.shop.speed?void 0:(STATE.player.score-=STATE.shop.speed,STATE.player.maxSpeed+=.05,STATE.shop.speed*=2)}upgradeStamina(){return STATE.player.score<STATE.shop.stamina?void 0:(STATE.player.score-=STATE.shop.stamina,STATE.player.maxStamina+=300,STATE.shop.maxStamina*=10)}upgradeHolster(){return STATE.player.score<STATE.shop.slots?void 0:(STATE.player.score-=STATE.shop.slots,STATE.player.slots+=1,STATE.shop.slots*=2)}back(){return STATE.shop.upgradeGun=null}buyUpgrade(c){if(STATE.player.score<STATE.shop.upgradeGun.upgrades[c])return;STATE.player.score-=STATE.shop.upgradeGun.upgrades[c],STATE.shop.upgradeGun.upgrades[c]*=2;let d={cap:function(){return STATE.shop.upgradeGun.cap+=~~(1+STATE.shop.upgradeGun.cap*.1)},rate:function(){return STATE.shop.upgradeGun.rate+=~~(STATE.shop.upgradeGun.rate*.1)},spread:function(){return STATE.shop.upgradeGun.spread-=~~(STATE.shop.upgradeGun.spread*.1)},damage:function(){return STATE.shop.upgradeGun.damage+=~~(STATE.shop.upgradeGun.damage*.1)},power:function(){return STATE.shop.upgradeGun.power+=~~(STATE.shop.upgradeGun.power*.1)},reload_time:function(){return STATE.shop.upgradeGun.reload_time-=~~(STATE.shop.upgradeGun.reload_time*.1)}};return d[c]()}render(){var c,d,j,g,l,n,r,i,h=this._ns_||"",f,e,s,a,b,p,t,k,u,x,o,z,C,B,m;l=this,l.open$(),(n=r=1,l[Ac]===1)||(n=r=0,l[Ac]=1),i=STATE.player.inSafeZone()?"fadeIn":"fadeOut",i===l[ia]||(r|=2,l[ia]=i),(!n||r&2)&&l.flagSelf$(l[ia]||""),c=null,STATE.shop.open||((f=e=1,c=l[Bc])||(f=e=0,l[Bc]=c=imba.createElement("div",null,`hud open-store ${h}`,null)),f||(c.up$=l),s=STATE.player.dead||void 0,s===c[ja]||(e|=2,c[ja]=s),e&2&&c.flag$(`hud open-store ${h} `+(c[ja]?"fadeOut":"")),f||(a=imba.createElement("div",c,`buy-row ${h}`,null)),f||a.on$("click",{toggleShop:!0},this),f||(b=imba.createElement("div",a,`back ${h}`,"Open shop"))),l[Cc]=l.insert$(c,0,l[Cc]),d=null,STATE.shop.open&&STATE.shop.upgradeGun&&((f=e=1,d=l[Dc])||(f=e=0,l[Dc]=d=imba.createElement("div",null,`hud store ${h}`,null)),f||(d.up$=l),f||(a=imba.createElement("h1",d,`${h}`,"UPGRADES")),(a=d[Ec])||(d[Ec]=a=imba.createElement("h3",d,`${h}`,null)),p=STATE.shop.upgradeGun.name,p===d[Gc]&&f||(d[Fc]=a.insert$(d[Gc]=p,384,d[Fc])),f||(a=imba.createElement("div",d,`buy-row ${h}`,null)),f||a.on$("click",{buyUpgrade:["cap"]},this),f||(b=imba.createElement("div",a,`item ${h}`,"Capacity")),(b=d[Hc])||(d[Hc]=b=imba.createElement("div",a,`prices ${h}`,null)),t=STATE.shop.upgradeGun.upgrades.cap,t===d[Jc]&&f||(d[Ic]=b.insert$(d[Jc]=t,384,d[Ic])),f||(a=imba.createElement("div",d,`buy-row ${h}`,null)),f||a.on$("click",{buyUpgrade:["rate"]},this),f||(b=imba.createElement("div",a,`item ${h}`,"Rate of fire")),(b=d[Kc])||(d[Kc]=b=imba.createElement("div",a,`prices ${h}`,null)),t=STATE.shop.upgradeGun.upgrades.rate,t===d[Mc]&&f||(d[Lc]=b.insert$(d[Mc]=t,384,d[Lc])),f||(a=imba.createElement("div",d,`buy-row ${h}`,null)),f||a.on$("click",{buyUpgrade:["spread"]},this),f||(b=imba.createElement("div",a,`item ${h}`,"Accuracy")),(b=d[Nc])||(d[Nc]=b=imba.createElement("div",a,`prices ${h}`,null)),t=STATE.shop.upgradeGun.upgrades.spread,t===d[Pc]&&f||(d[Oc]=b.insert$(d[Pc]=t,384,d[Oc])),f||(a=imba.createElement("div",d,`buy-row ${h}`,null)),f||a.on$("click",{buyUpgrade:["damage"]},this),f||(b=imba.createElement("div",a,`item ${h}`,"Damage")),(b=d[Qc])||(d[Qc]=b=imba.createElement("div",a,`prices ${h}`,null)),t=STATE.shop.upgradeGun.upgrades.damage,t===d[Sc]&&f||(d[Rc]=b.insert$(d[Sc]=t,384,d[Rc])),f||(a=imba.createElement("div",d,`buy-row ${h}`,null)),f||a.on$("click",{buyUpgrade:["power"]},this),f||(b=imba.createElement("div",a,`item ${h}`,"Power")),(b=d[Tc])||(d[Tc]=b=imba.createElement("div",a,`prices ${h}`,null)),t=STATE.shop.upgradeGun.upgrades.power,t===d[Vc]&&f||(d[Uc]=b.insert$(d[Vc]=t,384,d[Uc])),f||(a=imba.createElement("div",d,`buy-row ${h}`,null)),f||a.on$("click",{buyUpgrade:["reload_time"]},this),f||(b=imba.createElement("div",a,`item ${h}`,"Reload Speed")),(b=d[Wc])||(d[Wc]=b=imba.createElement("div",a,`prices ${h}`,null)),t=STATE.shop.upgradeGun.upgrades.reload_time,t===d[Yc]&&f||(d[Xc]=b.insert$(d[Yc]=t,384,d[Xc])),f||(a=imba.createElement("div",d,`row ${h}`,null)),f||(b=imba.createElement("div",a,`next-day ${h}`,"")),f||(b=imba.createElement("div",a,`back ${h}`,"Back")),f||b.on$("click",{back:!0},this)),l[Zc]=l.insert$(d,0,l[Zc]),g=null;if(STATE.shop.open&&!STATE.shop.upgradeGun){(f=e=1,g=l[_c])||(f=e=0,l[_c]=g=imba.createElement("div",null,`hud store ${h}`,null)),f||(g.up$=l),s=STATE.player.dead||void 0,s===g[ka]||(e|=2,g[ka]=s),e&2&&g.flag$(`hud store ${h} `+(g[ka]?"fadeOut":"")),f||(a=imba.createElement("h1",g,`${h}`,"SHOP")),f||(a=imba.createElement("div",g,`buy-row ${h}`,null)),f||(b=imba.createElement("div",a,`item ${h}`,"Item")),f||(b=imba.createElement("div",a,`prices ${h}`,"price")),f||(a=imba.createElement("div",g,`row ${h}`,null)),f||a.css$("margin-top","5%"),f||(a=imba.createElement("div",g,`buy-row ${h}`,null)),f||a.on$("click",{healPlayer:!0},this),f||(b=imba.createElement("div",a,`item ${h}`,"Heal")),(b=g[$c])||(g[$c]=b=imba.createElement("div",a,`prices ${h}`,null)),t=STATE.day*40,t===g[bd]&&f||(g[ad]=b.insert$(g[bd]=t,384,g[ad])),f||(a=imba.createElement("div",g,`buy-row ${h}`,null)),f||a.on$("click",{buyAmmo:!0},this),f||(b=imba.createElement("div",a,`item ${h}`,"Buy Ammo")),(b=g[cd])||(g[cd]=b=imba.createElement("div",a,`prices ${h}`,null)),t=STATE.day*200,t===g[ed]&&f||(g[dd]=b.insert$(g[ed]=t,384,g[dd])),f||(a=imba.createElement("div",g,`row ${h}`,null)),f||a.css$("margin-top","5%"),f||(a=imba.createElement("div",g,`buy-row ${h}`,null)),f||a.on$("click",{upgradeHealth:!0},this),f||(b=imba.createElement("div",a,`item ${h}`,"Upgrade health")),(b=g[fd])||(g[fd]=b=imba.createElement("div",a,`prices ${h}`,null)),t=STATE.shop.health,t===g[hd]&&f||(g[gd]=b.insert$(g[hd]=t,384,g[gd])),f||(a=imba.createElement("div",g,`buy-row ${h}`,null)),f||a.on$("click",{upgradeSpeed:!0},this),f||(b=imba.createElement("div",a,`item ${h}`,"Upgrade speed")),(b=g[id])||(g[id]=b=imba.createElement("div",a,`prices ${h}`,null)),t=STATE.shop.speed,t===g[kd]&&f||(g[jd]=b.insert$(g[kd]=t,384,g[jd])),f||(a=imba.createElement("div",g,`buy-row ${h}`,null)),f||a.on$("click",{upgradeStamina:!0},this),f||(b=imba.createElement("div",a,`item ${h}`,"Upgrade stamina")),(b=g[ld])||(g[ld]=b=imba.createElement("div",a,`prices ${h}`,null)),t=STATE.shop.maxStamina,t===g[nd]&&f||(g[md]=b.insert$(g[nd]=t,384,g[md])),j=null,STATE.player.slots<6&&((k=u=1,j=g[od])||(k=u=0,g[od]=j=imba.createElement("div",null,`buy-row ${h}`,null)),k||(j.up$=g),k||j.on$("click",{upgradeHolster:!0},this),k||(x=imba.createElement("div",j,`item ${h}`,"Upgrade holster")),(x=j[pd])||(j[pd]=x=imba.createElement("div",j,`prices ${h}`,null)),o=STATE.shop.slots,o===j[qd]||x.text$(String(j[qd]=o))),g[rd]=g.insert$(j,0,g[rd]),f||(a=imba.createElement("div",g,`row ${h}`,null)),f||a.css$("margin-top","5%"),(a=g[sd])||(g[sd]=a=imba.createIndexedFragment(0,g)),z=0,C=a.$;for(let q=0,v=ha(STATE.store),w=v.length;q<w;q++){let y=v[q];(k=u=1,b=C[z])||(k=u=0,C[z]=b=imba.createElement("div",a,`buy-row ${h}`,null)),k||(b.up$=a),t=b[td]||(b[td]={buyGun:[null]}),t.buyGun[0]=y,k||b.on$("click",t,this),(x=b[ud])||(b[ud]=x=imba.createElement("div",b,`item ${h}`,null)),k||x.insert$("buy "),o=y.name,o===b[wd]&&k||(b[vd]=x.insert$(b[wd]=o,256,b[vd])),(x=b[xd])||(b[xd]=x=imba.createElement("div",b,`prices ${h}`,null)),o=y.price,o===b[zd]&&k||(b[yd]=x.insert$(b[zd]=o,384,b[yd])),z++}a.end$(z),f||(a=imba.createElement("div",g,`row ${h}`,null)),f||a.css$("margin-top","5%"),f||(a=imba.createElement("h1",g,`${h}`,"INVERTORY")),(a=g[Ad])||(g[Ad]=a=imba.createIndexedFragment(0,g)),z=0,C=a.$;for(let q=0,v=ha(STATE.player.inventory),w=v.length;q<w;q++){let y=v[q];(k=u=1,b=C[z])||(k=u=0,C[z]=b=imba.createElement("div",a,`row ${h}`,null)),k||(b.up$=a),(x=b[Bd])||(b[Bd]=x=imba.createElement("div",b,`item ${h}`,null)),o=y.name,o===b[Dd]&&k||(b[Cd]=x.insert$(b[Dd]=o,384,b[Cd])),(B=m=1,x=b[Ed])||(B=m=0,b[Ed]=x=imba.createElement("div",b,`action ${h}`,"Equip")),o=b[Fd]||(b[Fd]={equipGun:[null]}),o.equipGun[0]=y,B||x.on$("click",o,this),(B=m=1,x=b[Gd])||(B=m=0,b[Gd]=x=imba.createElement("div",b,`action ${h}`,"Upgrade")),o=b[Hd]||(b[Hd]={upgradeGun:[null]}),o.upgradeGun[0]=y,B||x.on$("click",o,this),z++}a.end$(z),f||(a=imba.createElement("div",g,`row ${h}`,null)),f||a.css$("margin-top","5%"),f||(a=imba.createElement("div",g,`row ${h}`,null)),f||(b=imba.createElement("div",a,`next-day ${h}`,"Go to next day")),f||b.on$("click",{nextDay:!0},this),f||(b=imba.createElement("div",a,`close ${h}`,"Close")),f||b.on$("click",{toggleShop:!0},this)}return l[Id]=l.insert$(g,0,l[Id]),l.close$(r),l}}imba.tags.define("player-store",Ud,{ns:"tn7aa3g"});imba.inlineStyles(`.hud.tn7aa3g:not(#_) {position: fixed;
z-index: 1;
font-family: var(--font-Typewriter,Typewriter);
color: hsla(0.00,0.00%,100.00%,100%);
border-color: hsla(0.00,0.00%,100.00%,100%);
border: 1px;
cursor: pointer;
top: 2%;
left: 50%;
transform: translate(-50%, 0);}

.row.tn7aa3g:not(#_),.buy-row.tn7aa3g:not(#_) {display: flex;}

.item.tn7aa3g:not(#_),.next-day.tn7aa3g:not(#_) {width: 300px;}

.prices.tn7aa3g:not(#_),.close.tn7aa3g:not(#_) {text-align: right;
flex-grow: 1;}

.action.tn7aa3g:not(#_) {text-align: right;
width: 8vw;}


.buy-row:hover .prices.tn7aa3g:not(#_) {transform: translate(-1vw, 0) scale(1.3, 1.3);}

.action.tn7aa3g:not(#_):hover {transform: scale(1.3, 1.3);}

.next-day.tn7aa3g:not(#_):hover {transform: scale(1.3, 1.3) translate(1vw, 0);}

.close.tn7aa3g:not(#_):hover {transform: scale(1.3, 1.3) translate(-1vw, 0);}

.back.tn7aa3g:not(#_):hover {transform: scale(1.3, 1.3);}

.buy-row.tn7aa3g:not(#_):hover,.action.tn7aa3g:not(#_):hover,.next-day.tn7aa3g:not(#_):hover,.close.tn7aa3g:not(#_):hover,.back.tn7aa3g:not(#_):hover {text-shadow: 0px 0px 5px #F00;}

.store.tn7aa3g:not(#_) {font-size: calc(10px + .6vw);
background-color: rgba(0, 0, 0, 0.8);
padding: 30px;}

.open-store.tn7aa3g:not(#_) {cursor: none;
font-size: calc(15px + .8vw);
text-align: center;
top: 25%;}

`);function H(c){return c?c.toIterable?c.toIterable():c:[]}var ma=Symbol(),na=Symbol(),oa=Symbol(),Xd=Symbol(),W=Symbol(),pa=Symbol(),qa=Symbol(),ra=Symbol(),sa=Symbol(),ta=Symbol(),ua=Symbol(),va=Symbol(),wa=Symbol(),xa=Symbol(),ya=Symbol(),za=Symbol(),Aa=Symbol(),Yd=Symbol(),X=Symbol(),Ba=Symbol(),Ca=Symbol(),Da=Symbol(),Ea=Symbol(),Fa=Symbol(),Ga=Symbol(),Ha=Symbol(),Ia=Symbol(),Ja=Symbol(),Ka=Symbol(),La=Symbol(),Ma=Symbol(),Na=Symbol(),Oa=Symbol(),Pa=Symbol(),Qa=Symbol(),Ra=Symbol(),Sa=Symbol(),Ta=Symbol(),Ua=Symbol(),Va=Symbol(),Wa=Symbol(),Xa=Symbol(),Ya=Symbol(),Za=Symbol(),_a=Symbol(),$a=Symbol(),ab=Symbol(),bb=Symbol(),cb=Symbol(),db=Symbol(),eb=Symbol(),fb=Symbol(),gb=Symbol(),hb=Symbol(),ib=Symbol(),jb=Symbol(),kb=Symbol(),lb=Symbol(),mb=Symbol(),nb=Symbol(),ob=Symbol(),pb=Symbol(),qb=Symbol(),rb=Symbol(),sb=Symbol(),tb=Symbol(),ub=Symbol(),vb=Symbol(),wb=Symbol(),xb=Symbol(),yb=Symbol(),zb=Symbol(),K,Md,Ab;class Nd extends imba.tags.get("component","ImbaElement"){build(){var c;this.arrow_path="M0 0l254.38 454.78c-230.68,-167.78 -274.65,-164.19 -508.77,0l254.38 -454.78z",this.player=STATE.player,this.animations=[],this.loadAnimations(),this.randGround=[],c=[];for(let d=0,j=H(Array.from(Array(1e3).keys())),g=j.length;d<g;d++){let l=j[d];c.push(this.randGround.push({r:Math.random()*500,x:Math.random()*1e4,y:Math.random()*1e4}))}return c}mount(){return new STATE.game(this)}cameraPosX(){return window.innerWidth/2-this.player.position.x}cameraPosY(){return window.innerHeight/2-this.player.position.y}transformCamera(){if(STATE.time-this.player.gun.last_shot<30){let c=this.player.gun.power*this.player.gun.projectiles/2,d=this.cameraPosX()+Math.random()*c-c/2,j=this.cameraPosY()+Math.random()*c-c/2;return"translate("+d+", "+j+")"}else return"translate("+this.cameraPosX()+", "+this.cameraPosY()+")"}transformPlayer(){return"translate("+this.player.position.x+", "+this.player.position.y+") rotate("+this.player.rotation+")"}transformBullet(c){return"translate("+c.position.x+", "+c.position.y+") rotate("+c.rotation+")"}transformZombie(c){return"translate("+c.position.x+", "+c.position.y+") rotate("+c.rotation+")"}transformObstacle(c){return"translate("+c.position.x+", "+c.position.y+") rotate("+c.rotation+")"}transformShopArrow(){let c=this.player.position,d=-(Math.atan2(c.x,c.y)/.01745+180)%360;return"translate("+c.x+", "+c.y+") rotate("+d+")"}playerTexture(){let c=STATE.time/16,d=this.player.animation;return"url(#"+d.name+"-"+~~(c/d.frameLength%d.size)+")"}feetTexture(){let c=STATE.time/16,d=this.player.feetAnimation;return"url(#"+d.name+"-"+~~(c/d.frameLength%d.size)+")"}zombieTexture(c){let d=STATE.time/16,j=c.animation;return"url(#"+j.name+"-"+~~(d/j.frameLength%j.size)+")"}animationAdjust(){let c=this.player.animation.adjust;return"translate("+c.translate+") scale("+c.scale+")"}feetAdjust(){let c=this.player.feetAnimation.adjust;return"translate("+c.translate+") scale("+c.scale+")"}zombieAdjust(c){let d=c.animation.adjust;return"translate("+d.translate+") scale("+d.scale+")"}loadAnimations(){var c,d;for(let j=STATE.animations.player,g=0,l=Object.keys(j),n=l.length,r,i;g<n;g++){r=l[g],i=j[r];for(let h=0,f=Object.keys(i),e=f.length,s,a;h<e;h++){s=f[h],a=i[s];for(let b=0,p=H(Array.from(Array(a.size).keys())),t=p.length;b<t;b++){let k=p[b];this.animations.push({name:""+a.name+"-"+b,path:""+a.path+b})}}}for(let j=STATE.animations.feet,g=0,l=Object.keys(j),n=l.length,r,i;g<n;g++){r=l[g],i=j[r];for(let h=0,f=H(Array.from(Array(i.size).keys())),e=f.length;h<e;h++){let s=f[h];this.animations.push({name:""+i.name+"-"+h,path:""+i.path+h})}}d=[];for(let j=STATE.animations.zombie,g=0,l=Object.keys(j),n=l.length,r,i;g<n;g++){r=l[g],i=j[r],c=[];for(let h=0,f=H(Array.from(Array(i.size).keys())),e=f.length;h<e;h++){let s=f[h];c.push(this.animations.push({name:""+i.name+"-"+h,path:""+i.path+h}))}d.push(c)}return d}render(){var c,d,j,g,l,n,r,i,h,f=this._ns_||"",e,s,a,b,p,t,k,u,x,o,z,C,B,m,q,v,w,y,A,D,F,G,L,V,M,J,Jd,la;r=this,r.open$(),(i=h=1,r[ma]===1)||(i=h=0,r[ma]=1),g=l=n=null;if(STATE.loading)(e=s=1,g=r[na])||(e=s=0,r[na]=g=imba.createElement("h1",null,`${f}`,"Carregando")),e||(g.up$=r);else{(e=s=1,g=r[oa])||(e=s=0,r[oa]=g=imba.createElement("div",null,`${f}`,null)),e||(g.up$=r),a=!this.player.gun.firing||void 0,a===g[W]||(s|=2,g[W]=a),a="transform: translate(-500vw, -150vh) rotate("+(-this.player.rotation+90)+"deg)",a===g[pa]||(g.style=g[pa]=a),s&2&&g.flag$(`${f} `+(g[W]?"darkness":"")),(e=s=1,l=r[qa])||(e=s=0,r[qa]=l=imba.createElement("div",null,`ui ${f}`,null)),e||(l.up$=r),(p=t=1,b=l[ra])||(p=t=0,l[ra]=b=imba.createComponent("player-hud",l,`${f}`,null)),p||!b.setup||b.setup(t),b.end$(t),p||b.insertInto$(l),(p=t=1,b=l[sa])||(p=t=0,l[sa]=b=imba.createComponent("player-store",l,`${f}`,null)),p||!b.setup||b.setup(t),b.end$(t),p||b.insertInto$(l),(e=s=1,n=r[ta])||(e=s=0,r[ta]=n=imba.createSVGElement("svg",null,`${f}`,null)),e||(n.up$=r),e||n.set$("transform","scale(1,-1)"),e||n.set$("height","100%"),e||n.set$("width","100%"),(b=n[ua])||(n[ua]=b=imba.createSVGElement("defs",n,`${f}`,null)),(k=n[va])||(n[va]=k=imba.createIndexedFragment(128,b)),u=0,x=k.$;for(let E=0,Kd=H(this.animations),Vd=Kd.length;E<Vd;E++){let Ld=Kd[E];(z=C=1,o=x[u])||(z=C=0,x[u]=o=imba.createSVGElement("pattern",k,`${f}`,null)),z||(o.up$=k),B=""+Ld.name,B===o[wa]||o.set$("id",o[wa]=B),z||o.set$("patternUnits","userSpaceOnUse"),z||o.set$("width",100),z||o.set$("height",100),z||o.set$("patternContentUnits","userSpaceOnUse"),(q=v=1,m=o[xa])||(q=v=0,o[xa]=m=imba.createSVGElement("image",o,`${f}`,null)),w=""+Ld.path+".png",w===o[ya]||m.set$("href",o[ya]=w),q||m.set$("width",100),q||m.set$("height",100),u++}k.end$(u),e||(k=imba.createSVGElement("pattern",b,`${f}`,null)),e||k.set$("id","Mud"),e||k.set$("patternUnits","userSpaceOnUse"),e||k.set$("width",500),e||k.set$("height",500),e||k.set$("patternContentUnits","userSpaceOnUse"),e||(o=imba.createSVGElement("image",k,`${f}`,null)),e||o.set$("href","textures/the_floor/the_floor/Mud.png"),e||o.set$("width",500),e||o.set$("height",500),e||(k=imba.createSVGElement("pattern",b,`${f}`,null)),e||k.set$("id","Rock"),e||k.set$("patternUnits","userSpaceOnUse"),e||k.set$("width",500),e||k.set$("height",500),e||k.set$("patternContentUnits","userSpaceOnUse"),e||(o=imba.createSVGElement("image",k,`${f}`,null)),e||o.set$("href","textures/the_floor/the_floor/Rock.png"),e||o.set$("width",500),e||o.set$("height",500),e||(k=imba.createSVGElement("pattern",b,`${f}`,null)),e||k.set$("id","Forest"),e||k.set$("patternUnits","userSpaceOnUse"),e||k.set$("width",500),e||k.set$("height",500),e||k.set$("patternContentUnits","userSpaceOnUse"),e||(o=imba.createSVGElement("image",k,`${f}`,null)),e||o.set$("href","textures/the_floor/the_floor/Forest.png"),e||o.set$("width",500),e||o.set$("height",500),e||(k=imba.createSVGElement("pattern",b,`${f}`,null)),e||k.set$("id","bush"),e||k.set$("patternUnits","userSpaceOnUse"),e||k.set$("width",110),e||k.set$("height",110),e||k.set$("patternContentUnits","userSpaceOnUse"),e||(o=imba.createSVGElement("image",k,`${f}`,null)),e||o.set$("href","textures/the_floor/the_floor/bush.png"),e||o.set$("width",110),e||o.set$("height",110),e||(k=imba.createSVGElement("pattern",b,`${f}`,null)),e||k.set$("id","barrel"),e||k.set$("patternUnits","userSpaceOnUse"),e||k.set$("width",40),e||k.set$("height",40),e||k.set$("patternContentUnits","userSpaceOnUse"),e||(o=imba.createSVGElement("image",k,`${f}`,null)),e||o.set$("href","textures/the_floor/the_floor/barrel.png"),e||o.set$("width",40),e||o.set$("height",40),e||(k=imba.createSVGElement("pattern",b,`${f}`,null)),e||k.set$("id","blood"),e||k.set$("patternUnits","userSpaceOnUse"),e||k.set$("width",100),e||k.set$("height",100),e||k.set$("patternContentUnits","userSpaceOnUse"),e||(o=imba.createSVGElement("image",k,`${f}`,null)),e||o.set$("href","textures/the_floor/the_floor/blood_0.png"),e||o.set$("width",100),e||o.set$("height",100),e||(k=imba.createSVGElement("pattern",b,`${f}`,null)),e||k.set$("id","shot"),e||k.set$("patternUnits","userSpaceOnUse"),e||k.set$("width",100),e||k.set$("height",100),e||k.set$("patternContentUnits","userSpaceOnUse"),e||(o=imba.createSVGElement("image",k,`${f}`,null)),e||o.set$("href","textures/shoot/shoot/0.png"),e||o.set$("width",100),e||o.set$("height",100),(p=t=1,b=n[za])||(p=t=0,n[za]=b=imba.createSVGElement("g",n,`${f}`,null)),y=this.transformCamera(),y===n[Aa]||b.set$("transform",n[Aa]=y),y=this.player.dead||void 0,y===n[X]||(t|=2,n[X]=y),t&2&&b.flag$(`${f} `+(n[X]?"fadeOut":"")),p||(k=imba.createSVGElement("rect",b,`${f}`,null)),p||k.set$("height",1e5),p||k.set$("width",1e5),p||k.set$("transform","translate(-40000,-40000)"),p||k.set$("opacity",.33),p||k.set$("fill","url(#Mud)"),p||(k=imba.createSVGElement("rect",b,`${f}`,null)),p||k.set$("height",1e5),p||k.set$("width",1e5),p||k.set$("transform","translate(-40000,-40000)"),p||k.set$("opacity",.33),p||k.set$("fill","url(#Forest)"),p||(k=imba.createSVGElement("rect",b,`${f}`,null)),p||k.set$("height",1e5),p||k.set$("width",1e5),p||k.set$("transform","translate(-40000,-40000)"),p||k.set$("opacity",.33),p||k.set$("fill","url(#Rock)"),p||(k=imba.createSVGElement("rect",b,`${f}`,null)),p||k.set$("x","0"),p||k.set$("y","0"),p||k.set$("transform","translate(-100,-100)"),p||k.set$("height",200),p||k.set$("width",200),p||k.set$("stroke","#888"),p||k.set$("stroke-width","5px"),p||k.set$("fill","rgba(0,255,0,0.1)"),(k=n[Ba])||(n[Ba]=k=imba.createIndexedFragment(0,b)),u=0,x=k.$;for(let E of H(this.player.nearBushes))(z=C=1,o=x[u])||(z=C=0,x[u]=o=imba.createSVGElement("g",k,`${f}`,null)),z||(o.up$=k),B=this.transformObstacle(E),B===o[Ca]||o.set$("transform",o[Ca]=B),(q=v=1,m=o[Da])||(q=v=0,o[Da]=m=imba.createSVGElement("rect",o,`${f}`,null)),q||m.set$("fill","url(#bush)"),w=E.size*2+10,w===o[Ea]||m.set$("height",o[Ea]=w),w=E.size*2+10,w===o[Fa]||m.set$("width",o[Fa]=w),w="translate("+(-E.size-5)+","+(-E.size-5)+")",w===o[Ga]||m.set$("transform",o[Ga]=w),u++;k.end$(u),(k=n[Ha])||(n[Ha]=k=imba.createIndexedFragment(0,b)),u=0,x=k.$;for(let E of H(this.player.nearBarrels))(z=C=1,o=x[u])||(z=C=0,x[u]=o=imba.createSVGElement("g",k,`${f}`,null)),z||(o.up$=k),B=this.transformObstacle(E),B===o[Ia]||o.set$("transform",o[Ia]=B),(q=v=1,m=o[Ja])||(q=v=0,o[Ja]=m=imba.createSVGElement("rect",o,`${f}`,null)),q||m.set$("fill","url(#barrel)"),w=E.size*2,w===o[Ka]||m.set$("height",o[Ka]=w),w=E.size*2,w===o[La]||m.set$("width",o[La]=w),w="translate("+-E.size+","+-E.size+")",w===o[Ma]||m.set$("transform",o[Ma]=w),u++;k.end$(u),c=null,this.player.distanceTo(0,0)>1e3&&((z=C=1,c=n[Na])||(z=C=0,n[Na]=c=imba.createSVGElement("g",null,`fadeIn ${f}`,null)),z||(c.up$=b),B=this.transformShopArrow(),B===c[Oa]||c.set$("transform",c[Oa]=B),z||(m=imba.createSVGElement("g",c,`${f}`,null)),z||m.set$("transform","translate(0,350) rotate(180) scale(0.08,0.08)"),(D=F=1,A=c[Pa])||(D=F=0,c[Pa]=A=imba.createSVGElement("path",m,`${f}`,null)),D||A.set$("fill","rgba(0,255,0,0.4)"),G=this.arrow_path,G===c[Qa]||A.set$("d",c[Qa]=G)),n[Ra]=b.insert$(c,0,n[Ra]),(L=V=1,k=n[Sa])||(L=V=0,n[Sa]=k=imba.createSVGElement("g",b,`${f}`,null)),M=this.transformPlayer(),M===n[Ta]||k.set$("transform",n[Ta]=M),(z=C=1,o=n[Ua])||(z=C=0,n[Ua]=o=imba.createSVGElement("g",k,`${f}`,null)),B=this.feetAdjust(),B===n[Va]||o.set$("transform",n[Va]=B),(q=v=1,m=n[Wa])||(q=v=0,n[Wa]=m=imba.createSVGElement("rect",o,`${f}`,null)),q||m.set$("width",100),q||m.set$("height",100),q||m.set$("transform","rotate(90) translate(-50,-50)"),w=this.feetTexture(),w===n[Xa]||m.set$("fill",n[Xa]=w),(z=C=1,o=n[Ya])||(z=C=0,n[Ya]=o=imba.createSVGElement("g",k,`${f}`,null)),B=this.animationAdjust(),B===n[Za]||o.set$("transform",n[Za]=B),(q=v=1,m=n[_a])||(q=v=0,n[_a]=m=imba.createSVGElement("rect",o,`${f}`,null)),q||m.set$("width",100),q||m.set$("height",100),q||m.set$("transform","rotate(90) translate(-50,-50)"),w=this.playerTexture(),w===n[$a]||m.set$("fill",n[$a]=w),d=null,this.player.gun.firing&&((q=v=1,d=n[ab])||(q=v=0,n[ab]=d=imba.createSVGElement("rect",null,`${f}`,null)),q||(d.up$=k),q||d.set$("width",100),q||d.set$("height",100),q||d.set$("transform","rotate(90) translate(30,-65)"),q||d.set$("fill","url(#shot)")),n[bb]=k.insert$(d,0,n[bb]),(k=n[cb])||(n[cb]=k=imba.createIndexedFragment(0,b)),u=0,x=k.$;for(let E of H(STATE.bullets))(z=C=1,o=x[u])||(z=C=0,x[u]=o=imba.createSVGElement("g",k,`${f}`,null)),z||(o.up$=k),B=this.transformBullet(E),B===o[db]||o.set$("transform",o[db]=B),(q=v=1,m=o[eb])||(q=v=0,o[eb]=m=imba.createSVGElement("rect",o,`${f}`,null)),w=E.speed*4,w===o[fb]||m.set$("width",o[fb]=w),q||m.set$("height","1"),q||m.set$("fill","yellow"),u++;k.end$(u),(k=n[gb])||(n[gb]=k=imba.createIndexedFragment(0,b)),u=0,x=k.$;for(let E of H(this.player.nearZombies))(z=C=1,o=x[u])||(z=C=0,x[u]=o=imba.createSVGElement("g",k,`${f}`,null)),z||(o.up$=k),B=this.transformZombie(E),B===o[hb]||o.set$("transform",o[hb]=B),(q=v=1,m=o[ib])||(q=v=0,o[ib]=m=imba.createSVGElement("g",o,`${f}`,null)),w=this.zombieAdjust(E),w===o[jb]||m.set$("transform",o[jb]=w),(D=F=1,A=o[kb])||(D=F=0,o[kb]=A=imba.createSVGElement("rect",m,`${f}`,null)),D||A.set$("width",100),D||A.set$("height",100),D||A.set$("transform","translate(-50,-50)"),G=this.zombieTexture(E),G===o[lb]||A.set$("fill",o[lb]=G),j=null,E.taking_hit&&((J=Jd=1,j=o[mb])||(J=Jd=0,o[mb]=j=imba.createSVGElement("rect",null,`${f}`,null)),J||(j.up$=m),J||j.set$("width",100),J||j.set$("height",100),la="rotate("+(Math.random()*10-105)+") translate(-50,"+(Math.random()*10-100)+")",la===j[nb]||j.set$("transform",j[nb]=la),J||j.set$("fill","url(#blood)")),o[ob]=m.insert$(j,0,o[ob]),u++;k.end$(u),(k=n[pb])||(n[pb]=k=imba.createIndexedFragment(256,b)),u=0,x=k.$;for(let E of H(STATE.killed))(z=C=1,o=x[u])||(z=C=0,x[u]=o=imba.createSVGElement("g",k,`fadeOut ${f}`,null)),z||(o.up$=k),B=this.transformZombie(E),B===o[qb]||o.set$("transform",o[qb]=B),(q=v=1,m=o[rb])||(q=v=0,o[rb]=m=imba.createSVGElement("g",o,`${f}`,null)),w=this.zombieAdjust(E),w===o[sb]||m.set$("transform",o[sb]=w),(D=F=1,A=o[tb])||(D=F=0,o[tb]=A=imba.createSVGElement("rect",m,`${f}`,null)),D||A.set$("width",100),D||A.set$("height",100),D||A.set$("transform","translate(-50,-50)"),G=this.zombieTexture(E),G===o[ub]||A.set$("fill",o[ub]=G),u++;k.end$(u),(p=t=1,b=n[vb])||(p=t=0,n[vb]=b=imba.createSVGElement("g",n,`${f}`,null)),y="translate("+STATE.mouse.x+", "+STATE.mouse.y+")",y===n[wb]||b.set$("transform",n[wb]=y),p||(k=imba.createSVGElement("line",b,`${f}`,null)),p||k.set$("y1",4),p||k.set$("y2",10),p||k.set$("stroke","#5F5"),p||(k=imba.createSVGElement("line",b,`${f}`,null)),p||k.set$("y1",-4),p||k.set$("y2",-10),p||k.set$("stroke","#5F5"),p||(k=imba.createSVGElement("line",b,`${f}`,null)),p||k.set$("x1",4),p||k.set$("x2",10),p||k.set$("stroke","#5F5"),p||(k=imba.createSVGElement("line",b,`${f}`,null)),p||k.set$("x1",-4),p||k.set$("x2",-10),p||k.set$("stroke","#5F5")}return r[xb]=r.insert$(g,0,r[xb]),r[yb]=r.insert$(l,0,r[yb]),r[zb]=r.insert$(n,0,r[zb]),r.close$(h),r}}imba.tags.define("app-root",Nd,{ns:"yuxr2eg"});imba.mount((K=imba.createComponent("app-root",null,null,null),Md||!K.setup||K.setup(Ab),K.end$(Ab),K));imba.inlineStyles(`.yuxr2eg_.yuxr2eg:not(#_) {display: block;
position: fixed;
background-color: hsla(0.00,0.00%,0.00%,100%);
bottom: 0rem;
top: 0rem;
left: 0rem;
right: 0rem;}

.darkness.yuxr2eg:not(#_) {z-index: 1;
position: absolute;
top: 0rem;
left: 0rem;
height: 400vh;
width: 1100vw;
background-image: radial-gradient(ellipse at 0% 50%, rgba(0, 0, 0, 0) 33%, rgba(0, 0, 0, 0.98) 35.8%, rgba(0, 0, 0, 1) 100%);}

.fadeOut.yuxr2eg:not(#_) {-webkit-animation-duration: 1.5s;
animation-duration: 1.5s;
-webkit-animation-fill-mode: both;
animation-fill-mode: both;
-webkit-animation-name: fadeOut;
animation-name: var(--animation-fadeOut,fadeOut);}

.fadeIn.yuxr2eg:not(#_) {-webkit-animation-duration: 1.5s;
animation-duration: 1.5s;
-webkit-animation-fill-mode: both;
animation-fill-mode: both;
-webkit-animation-name: fadeIn;
animation-name: var(--animation-fadeIn,fadeIn);}

.ui.yuxr2eg:not(#_) {position: fixed;
z-index: 10;}

`);
